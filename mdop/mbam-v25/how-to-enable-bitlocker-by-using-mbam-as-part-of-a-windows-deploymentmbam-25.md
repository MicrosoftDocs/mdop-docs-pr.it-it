---
title: Come abilitare BitLocker usando MBAM come parte di una distribuzione di Windows
description: Come abilitare BitLocker usando MBAM come parte di una distribuzione di Windows
author: dansimp
ms.assetid: 7609ad7a-bb06-47be-b186-0a2db787c8a5
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, security
ms.mktglfcycl: manage
ms.sitesec: library
ms.prod: w10
ms.date: 04/23/2017
ms.openlocfilehash: 4b2cbf333c705088d0a068521fb65e99551bb1f1
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/26/2020
ms.locfileid: "10826226"
---
# <span data-ttu-id="9da11-103">Come abilitare BitLocker usando MBAM come parte di una distribuzione di Windows</span><span class="sxs-lookup"><span data-stu-id="9da11-103">How to Enable BitLocker by Using MBAM as Part of a Windows Deployment</span></span>


<span data-ttu-id="9da11-104">Questo argomento spiega come abilitare BitLocker nel computer di un utente finale usando MBAM nell'ambito del processo di creazione di immagini e distribuzione di Windows.</span><span class="sxs-lookup"><span data-stu-id="9da11-104">This topic explains how to enable BitLocker on an end user's computer by using MBAM as part of your Windows imaging and deployment process.</span></span> <span data-ttu-id="9da11-105">Se viene visualizzata una schermata nera al riavvio (dopo la conclusione dell'installazione) che indica che l'unità non può essere sbloccata, vedere le [versioni precedenti di Windows non iniziano dopo il passaggio "configurazione di Windows e gestione configurazione" Se si usa BitLocker con Windows 10, versione 1511](https://support.microsoft.com/en-us/help/4494799/earlier-windows-versions-don-t-start-after-you-use-pre-provision-bitlo).</span><span class="sxs-lookup"><span data-stu-id="9da11-105">If you see a black screen at restart (after Install phase concludes) indicating that the drive cannot be unlocked, see [Earlier Windows versions don't start after "Setup Windows and Configuration Manager" step if Pre-Provision BitLocker is used with Windows 10, version 1511](https://support.microsoft.com/en-us/help/4494799/earlier-windows-versions-don-t-start-after-you-use-pre-provision-bitlo).</span></span>

**<span data-ttu-id="9da11-106">Prerequisiti:</span><span class="sxs-lookup"><span data-stu-id="9da11-106">Prerequisites:</span></span>**

-   <span data-ttu-id="9da11-107">Un processo di distribuzione di immagini Windows esistente: Microsoft Deployment Toolkit (MDT), Microsoft System Center Configuration Manager o qualche altro strumento di imaging o processo, deve essere in posizione</span><span class="sxs-lookup"><span data-stu-id="9da11-107">An existing Windows image deployment process – Microsoft Deployment Toolkit (MDT), Microsoft System Center Configuration Manager, or some other imaging tool or process – must be in place</span></span>

-   <span data-ttu-id="9da11-108">Il TPM deve essere abilitato nel BIOS e visibile al sistema operativo</span><span class="sxs-lookup"><span data-stu-id="9da11-108">TPM must be enabled in the BIOS and visible to the OS</span></span>

-   <span data-ttu-id="9da11-109">L'infrastruttura del server MBAM deve essere in posizione e accessibile</span><span class="sxs-lookup"><span data-stu-id="9da11-109">MBAM server infrastructure must be in place and accessible</span></span>

-   <span data-ttu-id="9da11-110">La partizione di sistema richiesta da BitLocker deve essere creata</span><span class="sxs-lookup"><span data-stu-id="9da11-110">The system partition required by BitLocker must be created</span></span>

-   <span data-ttu-id="9da11-111">La macchina deve essere collegata al dominio durante l'imaging prima che MBAM consenta completamente BitLocker</span><span class="sxs-lookup"><span data-stu-id="9da11-111">The machine must be domain joined during imaging before MBAM fully enables BitLocker</span></span>

**<span data-ttu-id="9da11-112">Per abilitare BitLocker con MBAM 2,5 SP1 come parte di una distribuzione di Windows</span><span class="sxs-lookup"><span data-stu-id="9da11-112">To enable BitLocker using MBAM 2.5 SP1 as part of a Windows deployment</span></span>**

1. <span data-ttu-id="9da11-113">In MBAM 2,5 SP1 l'approccio consigliato per abilitare BitLocker durante una distribuzione di Windows consiste nell'usare lo `Invoke-MbamClientDeployment.ps1` script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9da11-113">In MBAM 2.5 SP1, the recommended approach to enable BitLocker during a Windows Deployment is by using the `Invoke-MbamClientDeployment.ps1` PowerShell script.</span></span>

   -   <span data-ttu-id="9da11-114">Lo `Invoke-MbamClientDeployment.ps1` script attiva BitLocker durante il processo di imaging.</span><span class="sxs-lookup"><span data-stu-id="9da11-114">The `Invoke-MbamClientDeployment.ps1` script enacts BitLocker during the imaging process.</span></span> <span data-ttu-id="9da11-115">Quando necessario per i criteri di BitLocker, l'agente MBAM chiede immediatamente all'utente del dominio di creare un PIN o una password quando l'utente del dominio accede prima dopo l'imaging.</span><span class="sxs-lookup"><span data-stu-id="9da11-115">When required by BitLocker policy, the MBAM agent immediately prompts the domain user to create a PIN or password when the domain user first logs on after imaging.</span></span>

   -   <span data-ttu-id="9da11-116">Facile da usare con MDT, System Center Configuration Manager o processi di imaging autonomi</span><span class="sxs-lookup"><span data-stu-id="9da11-116">Easy to use with MDT, System Center Configuration Manager, or standalone imaging processes</span></span>

   -   <span data-ttu-id="9da11-117">Compatibile con PowerShell 2,0 o versioni successive</span><span class="sxs-lookup"><span data-stu-id="9da11-117">Compatible with PowerShell 2.0 or higher</span></span>

   -   <span data-ttu-id="9da11-118">Crittografare il volume del sistema operativo con il Protector Key TPM</span><span class="sxs-lookup"><span data-stu-id="9da11-118">Encrypt OS volume with TPM key protector</span></span>

   -   <span data-ttu-id="9da11-119">Supportare completamente BitLocker pre-provisioning</span><span class="sxs-lookup"><span data-stu-id="9da11-119">Fully support BitLocker pre-provisioning</span></span>

   -   <span data-ttu-id="9da11-120">Facoltativamente crittografare FDDs</span><span class="sxs-lookup"><span data-stu-id="9da11-120">Optionally encrypt FDDs</span></span>

   -   <span data-ttu-id="9da11-121">TPM OwnerAuth per Windows 7, MBAM deve essere proprietario del TPM per l'impegno.</span><span class="sxs-lookup"><span data-stu-id="9da11-121">Escrow TPM OwnerAuth For Windows 7, MBAM must own the TPM for escrow to occur.</span></span>
   <span data-ttu-id="9da11-122">Per Windows 8,1, Windows 10 RTM e Windows 10 versione 1511 è supportato l'impegno di TPM OwnerAuth.</span><span class="sxs-lookup"><span data-stu-id="9da11-122">For Windows 8.1, Windows 10 RTM and Windows 10 version 1511, escrow of TPM OwnerAuth is supported.</span></span>
   <span data-ttu-id="9da11-123">Per Windows 10, versione 1607 o successiva, solo Windows può assumere la proprietà del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-123">For Windows 10, version 1607 or later, only Windows can take ownership of the TPM.</span></span> <span data-ttu-id="9da11-124">In addiiton Windows non manterrà la password del proprietario del TPM durante il provisioning del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-124">In addiiton, Windows will not retain the TPM owner password when provisioning the TPM.</span></span> <span data-ttu-id="9da11-125">Per ulteriori informazioni, vedere [password del proprietario del TPM](https://docs.microsoft.com/windows/security/hardware-protection/tpm/change-the-tpm-owner-password) .</span><span class="sxs-lookup"><span data-stu-id="9da11-125">See [TPM owner password](https://docs.microsoft.com/windows/security/hardware-protection/tpm/change-the-tpm-owner-password) for further details.</span></span>

   -   <span data-ttu-id="9da11-126">Chiavi di ripristino escrow e pacchetti chiave di ripristino</span><span class="sxs-lookup"><span data-stu-id="9da11-126">Escrow recovery keys and recovery key packages</span></span>

   -   <span data-ttu-id="9da11-127">Segnalare immediatamente lo stato di crittografia</span><span class="sxs-lookup"><span data-stu-id="9da11-127">Report encryption status immediately</span></span>

   -   <span data-ttu-id="9da11-128">Nuovi provider WMI</span><span class="sxs-lookup"><span data-stu-id="9da11-128">New WMI providers</span></span>

   -   <span data-ttu-id="9da11-129">Registrazione dettagliata</span><span class="sxs-lookup"><span data-stu-id="9da11-129">Detailed logging</span></span>

   -   <span data-ttu-id="9da11-130">Gestione degli errori affidabile</span><span class="sxs-lookup"><span data-stu-id="9da11-130">Robust error handling</span></span>

   <span data-ttu-id="9da11-131">È possibile scaricare lo `Invoke-MbamClientDeployment.ps1` script dall' [area download Microsoft.com](https://www.microsoft.com/download/details.aspx?id=54439).</span><span class="sxs-lookup"><span data-stu-id="9da11-131">You can download the `Invoke-MbamClientDeployment.ps1` script from [Microsoft.com Download Center](https://www.microsoft.com/download/details.aspx?id=54439).</span></span> <span data-ttu-id="9da11-132">Questo è lo script principale che verrà chiamato dal sistema di distribuzione per configurare le chiavi di crittografia unità BitLocker e di ripristino record con il server MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-132">This is the main script that your deployment system will call to configure BitLocker drive encryption and record recovery keys with the MBAM Server.</span></span>

   <span data-ttu-id="9da11-133">**Metodi di distribuzione WMI per mbam:** I metodi WMI seguenti sono stati aggiunti in MBAM 2,5 SP1 per supportare l'abilitazione di BitLocker tramite lo `Invoke-MbamClientDeployment.ps1` script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9da11-133">**WMI deployment methods for MBAM:** The following WMI methods have been added in MBAM 2.5 SP1 to support enabling BitLocker by using the `Invoke-MbamClientDeployment.ps1` PowerShell script.</span></span>

   <a href="" id="mbam-machine-wmi-class"></a><span data-ttu-id="9da11-134">**Mbam \ _Machine classe WMI** 
    **PrepareTpmAndEscrowOwnerAuth:** Legge il TPM OwnerAuth e lo invia al database di ripristino MBAM usando il servizio di ripristino MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-134">**MBAM\_Machine WMI Class**
**PrepareTpmAndEscrowOwnerAuth:** Reads the TPM OwnerAuth and sends it to the MBAM recovery database by using the MBAM recovery service.</span></span> <span data-ttu-id="9da11-135">Se il TPM non è di proprietà e il provisioning automatico non è attivato, genera un OwnerAuth TPM e assume la proprietà.</span><span class="sxs-lookup"><span data-stu-id="9da11-135">If the TPM is not owned and auto-provisioning is not on, it generates a TPM OwnerAuth and takes ownership.</span></span> <span data-ttu-id="9da11-136">In caso di esito negativo, viene restituito un codice di errore per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="9da11-136">If it fails, an error code is returned for troubleshooting.</span></span>

   <span data-ttu-id="9da11-137">**Nota** Per Windows 10, versione 1607 o successiva, solo Windows può assumere la proprietà del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-137">**Note** For Windows 10, version 1607 or later, only Windows can take ownership of the TPM.</span></span> <span data-ttu-id="9da11-138">In addiiton Windows non manterrà la password del proprietario del TPM durante il provisioning del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-138">In addiiton, Windows will not retain the TPM owner password when provisioning the TPM.</span></span> <span data-ttu-id="9da11-139">Per ulteriori informazioni, vedere [password del proprietario del TPM](https://docs.microsoft.com/windows/security/hardware-protection/tpm/change-the-tpm-owner-password) .</span><span class="sxs-lookup"><span data-stu-id="9da11-139">See [TPM owner password](https://docs.microsoft.com/windows/security/hardware-protection/tpm/change-the-tpm-owner-password) for further details.</span></span>

| <span data-ttu-id="9da11-140">Parametro</span><span class="sxs-lookup"><span data-stu-id="9da11-140">Parameter</span></span> | <span data-ttu-id="9da11-141">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9da11-141">Description</span></span> |
| -------- | ----------- |
| <span data-ttu-id="9da11-142">RecoveryServiceEndPoint</span><span class="sxs-lookup"><span data-stu-id="9da11-142">RecoveryServiceEndPoint</span></span> | <span data-ttu-id="9da11-143">Stringa che specifica l'endpoint del servizio di ripristino MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-143">A string specifying the MBAM recovery service endpoint.</span></span> |

<span data-ttu-id="9da11-144">Ecco un elenco di messaggi di errore comuni:</span><span class="sxs-lookup"><span data-stu-id="9da11-144">Here are a list of common error messages:</span></span>

| <span data-ttu-id="9da11-145">Valori restituiti comuni</span><span class="sxs-lookup"><span data-stu-id="9da11-145">Common return values</span></span> | <span data-ttu-id="9da11-146">Messaggio di errore</span><span class="sxs-lookup"><span data-stu-id="9da11-146">Error message</span></span> |
| -------------------- | ------------- |
|  **<span data-ttu-id="9da11-147">S_OK</span><span class="sxs-lookup"><span data-stu-id="9da11-147">S_OK</span></span>**<br /><span data-ttu-id="9da11-148">0 (0x0)</span><span class="sxs-lookup"><span data-stu-id="9da11-148">0 (0x0)</span></span> | <span data-ttu-id="9da11-149">Il metodo ha avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="9da11-149">The method was successful.</span></span> |
| **<span data-ttu-id="9da11-150">MBAM_E_TPM_NOT_PRESENT</span><span class="sxs-lookup"><span data-stu-id="9da11-150">MBAM_E_TPM_NOT_PRESENT</span></span>**<br /><span data-ttu-id="9da11-151">2147746304 (0x80040200)</span><span class="sxs-lookup"><span data-stu-id="9da11-151">2147746304 (0x80040200)</span></span> | <span data-ttu-id="9da11-152">TPM non è presente nel computer o è disabilitato nella configurazione del BIOS.</span><span class="sxs-lookup"><span data-stu-id="9da11-152">TPM is not present in the computer or is disabled in the BIOS configuration.</span></span> |
| **<span data-ttu-id="9da11-153">MBAM_E_TPM_INCORRECT_STATE</span><span class="sxs-lookup"><span data-stu-id="9da11-153">MBAM_E_TPM_INCORRECT_STATE</span></span>**<br /><span data-ttu-id="9da11-154">2147746305 (0x80040201)</span><span class="sxs-lookup"><span data-stu-id="9da11-154">2147746305 (0x80040201)</span></span> | <span data-ttu-id="9da11-155">TPM non è nello stato corretto (abilitato, attivato e installazione del proprietario consentita).</span><span class="sxs-lookup"><span data-stu-id="9da11-155">TPM is not in the correct state (enabled, activated and owner installation allowed).</span></span> |
| **<span data-ttu-id="9da11-156">MBAM_E_TPM_AUTO_PROVISIONING_PENDING</span><span class="sxs-lookup"><span data-stu-id="9da11-156">MBAM_E_TPM_AUTO_PROVISIONING_PENDING</span></span>**<br /><span data-ttu-id="9da11-157">2147746306 (0x80040202)</span><span class="sxs-lookup"><span data-stu-id="9da11-157">2147746306 (0x80040202)</span></span> | <span data-ttu-id="9da11-158">MBAM non può assumere la proprietà del TPM perché il provisioning automatico è in sospeso.</span><span class="sxs-lookup"><span data-stu-id="9da11-158">MBAM cannot take ownership of TPM because auto-provisioning is pending.</span></span> <span data-ttu-id="9da11-159">Riprovare dopo il completamento del provisioning automatico.</span><span class="sxs-lookup"><span data-stu-id="9da11-159">Try again after auto-provisioning is completed.</span></span> |
| **<span data-ttu-id="9da11-160">MBAM_E_TPM_OWNERAUTH_READFAIL</span><span class="sxs-lookup"><span data-stu-id="9da11-160">MBAM_E_TPM_OWNERAUTH_READFAIL</span></span>**<br /><span data-ttu-id="9da11-161">2147746307 (0x80040203)</span><span class="sxs-lookup"><span data-stu-id="9da11-161">2147746307 (0x80040203)</span></span> | <span data-ttu-id="9da11-162">MBAM non può leggere il valore di autorizzazione del proprietario del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-162">MBAM cannot read the TPM owner authorization value.</span></span> <span data-ttu-id="9da11-163">Il valore potrebbe essere stato rimosso dopo un escrow riuscito.</span><span class="sxs-lookup"><span data-stu-id="9da11-163">The value might have been removed after a successful escrow.</span></span> <span data-ttu-id="9da11-164">In Windows 7 MBAM non è in grado di leggere il valore se il TPM è di proprietà di altri utenti.</span><span class="sxs-lookup"><span data-stu-id="9da11-164">On Windows 7, MBAM cannot read the value if the TPM is owned by others.</span></span> |
| **<span data-ttu-id="9da11-165">MBAM_E_REBOOT_REQUIRED</span><span class="sxs-lookup"><span data-stu-id="9da11-165">MBAM_E_REBOOT_REQUIRED</span></span>**<br /><span data-ttu-id="9da11-166">2147746308 (0x80040204)</span><span class="sxs-lookup"><span data-stu-id="9da11-166">2147746308 (0x80040204)</span></span> | <span data-ttu-id="9da11-167">Il computer deve essere riavviato per impostare TPM sullo stato corretto.</span><span class="sxs-lookup"><span data-stu-id="9da11-167">The computer must be restarted to set TPM to the correct state.</span></span> <span data-ttu-id="9da11-168">Potrebbe essere necessario riavviare manualmente il computer.</span><span class="sxs-lookup"><span data-stu-id="9da11-168">You might need to manually reboot the computer.</span></span> |
| **<span data-ttu-id="9da11-169">MBAM_E_SHUTDOWN_REQUIRED</span><span class="sxs-lookup"><span data-stu-id="9da11-169">MBAM_E_SHUTDOWN_REQUIRED</span></span>**<br /><span data-ttu-id="9da11-170">2147746309 (0x80040205)</span><span class="sxs-lookup"><span data-stu-id="9da11-170">2147746309 (0x80040205)</span></span> | <span data-ttu-id="9da11-171">Il computer deve essere arrestato e riattivato per impostare TPM sullo stato corretto.</span><span class="sxs-lookup"><span data-stu-id="9da11-171">The computer must be shut down and turned back on to set TPM to the correct state.</span></span> <span data-ttu-id="9da11-172">Potrebbe essere necessario riavviare manualmente il computer.</span><span class="sxs-lookup"><span data-stu-id="9da11-172">You might need to manually reboot the computer.</span></span> |
| **<span data-ttu-id="9da11-173">WS_E_ENDPOINT_ACCESS_DENIED</span><span class="sxs-lookup"><span data-stu-id="9da11-173">WS_E_ENDPOINT_ACCESS_DENIED</span></span>**<br /><span data-ttu-id="9da11-174">2151481349 (0x803D0005)</span><span class="sxs-lookup"><span data-stu-id="9da11-174">2151481349 (0x803D0005)</span></span> | <span data-ttu-id="9da11-175">L'accesso è stato negato dall'endpoint remoto.</span><span class="sxs-lookup"><span data-stu-id="9da11-175">Access was denied by the remote endpoint.</span></span> |
| **<span data-ttu-id="9da11-176">WS_E_ENDPOINT_NOT_FOUND</span><span class="sxs-lookup"><span data-stu-id="9da11-176">WS_E_ENDPOINT_NOT_FOUND</span></span>**<br /><span data-ttu-id="9da11-177">2151481357 (0x803D000D)</span><span class="sxs-lookup"><span data-stu-id="9da11-177">2151481357 (0x803D000D)</span></span> | <span data-ttu-id="9da11-178">L'endpoint remoto non esiste o non è possibile trovarlo.</span><span class="sxs-lookup"><span data-stu-id="9da11-178">The remote endpoint does not exist or could not be located.</span></span> |
| <span data-ttu-id="9da11-179">\* \* WS_E_ENDPOINT_FAILURE</span><span class="sxs-lookup"><span data-stu-id="9da11-179">\*\*WS_E_ENDPOINT_FAILURE</span></span><br /><span data-ttu-id="9da11-180">2151481357 (0x803D000F)</span><span class="sxs-lookup"><span data-stu-id="9da11-180">2151481357 (0x803D000F)</span></span> | <span data-ttu-id="9da11-181">L'endpoint remoto non ha potuto elaborare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="9da11-181">The remote endpoint could not process the request.</span></span> |
| **<span data-ttu-id="9da11-182">WS_E_ENDPOINT_UNREACHABLE</span><span class="sxs-lookup"><span data-stu-id="9da11-182">WS_E_ENDPOINT_UNREACHABLE</span></span>**<br /><span data-ttu-id="9da11-183">2151481360 (0x803D0010)</span><span class="sxs-lookup"><span data-stu-id="9da11-183">2151481360 (0x803D0010)</span></span> | <span data-ttu-id="9da11-184">L'endpoint remoto non è raggiungibile.</span><span class="sxs-lookup"><span data-stu-id="9da11-184">The remote endpoint was not reachable.</span></span> |
| **<span data-ttu-id="9da11-185">WS_E_ENDPOINT_FAULT_RECEIVED</span><span class="sxs-lookup"><span data-stu-id="9da11-185">WS_E_ENDPOINT_FAULT_RECEIVED</span></span>**<br /><span data-ttu-id="9da11-186">2151481363 (0x803D0013)</span><span class="sxs-lookup"><span data-stu-id="9da11-186">2151481363 (0x803D0013)</span></span> | <span data-ttu-id="9da11-187">Un messaggio contenente un errore è stato ricevuto dall'endpoint remoto.</span><span class="sxs-lookup"><span data-stu-id="9da11-187">A message containing a fault was received from the remote endpoint.</span></span> <span data-ttu-id="9da11-188">Verificare di essere connessi all'endpoint di servizio corretto.</span><span class="sxs-lookup"><span data-stu-id="9da11-188">Make sure you are connecting to the correct service endpoint.</span></span> |
| <span data-ttu-id="9da11-189">**WS_E_INVALID_ENDPOINT_URL** 2151481376 (0x803D0020)</span><span class="sxs-lookup"><span data-stu-id="9da11-189">**WS_E_INVALID_ENDPOINT_URL** 2151481376 (0x803D0020)</span></span> | <span data-ttu-id="9da11-190">L'URL dell'indirizzo endpoint non è valido.</span><span class="sxs-lookup"><span data-stu-id="9da11-190">The endpoint address URL is not valid.</span></span> <span data-ttu-id="9da11-191">L'URL deve iniziare con "http" o "https".</span><span class="sxs-lookup"><span data-stu-id="9da11-191">The URL must start with “http” or “https”.</span></span> |

   <span data-ttu-id="9da11-192">**ReportStatus:** Legge lo stato di conformità del volume e lo invia al database di stato di conformità di MBAM usando il servizio di segnalazione dello stato di MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-192">**ReportStatus:** Reads the compliance status of the volume and sends it to the MBAM compliance status database by using the MBAM status reporting service.</span></span> <span data-ttu-id="9da11-193">Lo stato include la forza di cifratura, il tipo di protezione, lo stato di protezione e la crittografia.</span><span class="sxs-lookup"><span data-stu-id="9da11-193">The status includes cipher strength, protector type, protector state and encryption state.</span></span> <span data-ttu-id="9da11-194">In caso di esito negativo, viene restituito un codice di errore per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="9da11-194">If it fails, an error code is returned for troubleshooting.</span></span>

   | <span data-ttu-id="9da11-195">Parametro</span><span class="sxs-lookup"><span data-stu-id="9da11-195">Parameter</span></span> | <span data-ttu-id="9da11-196">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9da11-196">Description</span></span> |
   | --------- | ----------- |
   | <span data-ttu-id="9da11-197">ReportingServiceEndPoint</span><span class="sxs-lookup"><span data-stu-id="9da11-197">ReportingServiceEndPoint</span></span> | <span data-ttu-id="9da11-198">Stringa che specifica l'endpoint del servizio Segnalazione stato di MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-198">A string specifying the MBAM status reporting service endpoint.</span></span> |

   <span data-ttu-id="9da11-199">Ecco un elenco di messaggi di errore comuni:</span><span class="sxs-lookup"><span data-stu-id="9da11-199">Here are a list of common error messages:</span></span>

   | <span data-ttu-id="9da11-200">Valori restituiti comuni</span><span class="sxs-lookup"><span data-stu-id="9da11-200">Common return values</span></span> | <span data-ttu-id="9da11-201">Messaggio di errore</span><span class="sxs-lookup"><span data-stu-id="9da11-201">Error message</span></span> |
   | -------------------- | ------------- |
   | **<span data-ttu-id="9da11-202">S_OK</span><span class="sxs-lookup"><span data-stu-id="9da11-202">S_OK</span></span>**<br /> <span data-ttu-id="9da11-203">0 (0x0)</span><span class="sxs-lookup"><span data-stu-id="9da11-203">0 (0x0)</span></span> | <span data-ttu-id="9da11-204">Il metodo ha avuto esito positivo</span><span class="sxs-lookup"><span data-stu-id="9da11-204">The method was successful</span></span> |
   | **<span data-ttu-id="9da11-205">WS_E_ENDPOINT_ACCESS_DENIED</span><span class="sxs-lookup"><span data-stu-id="9da11-205">WS_E_ENDPOINT_ACCESS_DENIED</span></span>**<br /><span data-ttu-id="9da11-206">2151481349 (0x803D0005)</span><span class="sxs-lookup"><span data-stu-id="9da11-206">2151481349 (0x803D0005)</span></span> | <span data-ttu-id="9da11-207">L'accesso è stato negato dall'endpoint remoto.</span><span class="sxs-lookup"><span data-stu-id="9da11-207">Access was denied by the remote endpoint.</span></span>|
   | **<span data-ttu-id="9da11-208">WS_E_ENDPOINT_NOT_FOUND</span><span class="sxs-lookup"><span data-stu-id="9da11-208">WS_E_ENDPOINT_NOT_FOUND</span></span>**<br /><span data-ttu-id="9da11-209">2151481357 (0x803D000D)</span><span class="sxs-lookup"><span data-stu-id="9da11-209">2151481357 (0x803D000D)</span></span> | <span data-ttu-id="9da11-210">L'endpoint remoto non esiste o non è possibile trovarlo.</span><span class="sxs-lookup"><span data-stu-id="9da11-210">The remote endpoint does not exist or could not be located.</span></span> |
   | **<span data-ttu-id="9da11-211">WS_E_ENDPOINT_FAILURE</span><span class="sxs-lookup"><span data-stu-id="9da11-211">WS_E_ENDPOINT_FAILURE</span></span>**<br /> <span data-ttu-id="9da11-212">2151481357 (0x803D000F)</span><span class="sxs-lookup"><span data-stu-id="9da11-212">2151481357 (0x803D000F)</span></span> | <span data-ttu-id="9da11-213">L'endpoint remoto non ha potuto elaborare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="9da11-213">The remote endpoint could not process the request.</span></span> |
   | **<span data-ttu-id="9da11-214">WS_E_ENDPOINT_UNREACHABLE</span><span class="sxs-lookup"><span data-stu-id="9da11-214">WS_E_ENDPOINT_UNREACHABLE</span></span>**<br /><span data-ttu-id="9da11-215">2151481360 (0x803D0010)</span><span class="sxs-lookup"><span data-stu-id="9da11-215">2151481360 (0x803D0010)</span></span> | <span data-ttu-id="9da11-216">L'endpoint remoto non è raggiungibile.</span><span class="sxs-lookup"><span data-stu-id="9da11-216">The remote endpoint was not reachable.</span></span> |
   | **<span data-ttu-id="9da11-217">WS_E_ENDPOINT_FAULT_RECEIVED</span><span class="sxs-lookup"><span data-stu-id="9da11-217">WS_E_ENDPOINT_FAULT_RECEIVED</span></span>**<br /><span data-ttu-id="9da11-218">2151481363 (0x803D0013)</span><span class="sxs-lookup"><span data-stu-id="9da11-218">2151481363 (0x803D0013)</span></span> | <span data-ttu-id="9da11-219">Un messaggio contenente un errore è stato ricevuto dall'endpoint remoto.</span><span class="sxs-lookup"><span data-stu-id="9da11-219">A message containing a fault was received from the remote endpoint.</span></span> <span data-ttu-id="9da11-220">Verificare di essere connessi all'endpoint di servizio corretto.</span><span class="sxs-lookup"><span data-stu-id="9da11-220">Make sure you are connecting to the correct service endpoint.</span></span> |
   | **<span data-ttu-id="9da11-221">WS_E_INVALID_ENDPOINT_URL</span><span class="sxs-lookup"><span data-stu-id="9da11-221">WS_E_INVALID_ENDPOINT_URL</span></span>**<br /><span data-ttu-id="9da11-222">2151481376 (0x803D0020)</span><span class="sxs-lookup"><span data-stu-id="9da11-222">2151481376 (0x803D0020)</span></span> | <span data-ttu-id="9da11-223">L'URL dell'indirizzo endpoint non è valido.</span><span class="sxs-lookup"><span data-stu-id="9da11-223">The endpoint address URL is not valid.</span></span> <span data-ttu-id="9da11-224">L'URL deve iniziare con "http" o "https".</span><span class="sxs-lookup"><span data-stu-id="9da11-224">The URL must start with “http” or “https”.</span></span> |

   <a href="" id="mbam-volume-wmi-class"></a><span data-ttu-id="9da11-225">**Mbam \ _VOLUME WMI class** **EscrowRecoveryKey:** legge la password di ripristino numerico e il pacchetto di tasti del volume e li invia al database di ripristino MBAM usando il servizio di ripristino MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-225">**MBAM\_Volume WMI Class** **EscrowRecoveryKey:** Reads the recovery numerical password and key package of the volume and sends them to the MBAM recovery database by using the MBAM recovery service.</span></span> <span data-ttu-id="9da11-226">In caso di esito negativo, viene restituito un codice di errore per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="9da11-226">If it fails, an error code is returned for troubleshooting.</span></span>

   | <span data-ttu-id="9da11-227">Parametro</span><span class="sxs-lookup"><span data-stu-id="9da11-227">Parameter</span></span> | <span data-ttu-id="9da11-228">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9da11-228">Description</span></span> |
   | --------- | ----------- |
   | <span data-ttu-id="9da11-229">RecoveryServiceEndPoint</span><span class="sxs-lookup"><span data-stu-id="9da11-229">RecoveryServiceEndPoint</span></span> | <span data-ttu-id="9da11-230">Stringa che specifica l'endpoint del servizio di ripristino MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-230">A string specifying the MBAM recovery service endpoint.</span></span> |

   <span data-ttu-id="9da11-231">Ecco un elenco di messaggi di errore comuni:</span><span class="sxs-lookup"><span data-stu-id="9da11-231">Here are a list of common error messages:</span></span>

   | <span data-ttu-id="9da11-232">Valori restituiti comuni</span><span class="sxs-lookup"><span data-stu-id="9da11-232">Common return values</span></span> | <span data-ttu-id="9da11-233">Messaggio di errore</span><span class="sxs-lookup"><span data-stu-id="9da11-233">Error message</span></span> |
   | -------------------- | ------------- |
   | **<span data-ttu-id="9da11-234">S_OK</span><span class="sxs-lookup"><span data-stu-id="9da11-234">S_OK</span></span>**<br /><span data-ttu-id="9da11-235">0 (0x0)</span><span class="sxs-lookup"><span data-stu-id="9da11-235">0 (0x0)</span></span> | <span data-ttu-id="9da11-236">Il metodo ha avuto esito positivo</span><span class="sxs-lookup"><span data-stu-id="9da11-236">The method was successful</span></span> |
   | **<span data-ttu-id="9da11-237">FVE_E_LOCKED_VOLUME</span><span class="sxs-lookup"><span data-stu-id="9da11-237">FVE_E_LOCKED_VOLUME</span></span>**<br /><span data-ttu-id="9da11-238">2150694912 (0x80310000)</span><span class="sxs-lookup"><span data-stu-id="9da11-238">2150694912 (0x80310000)</span></span> | <span data-ttu-id="9da11-239">Il volume è bloccato.</span><span class="sxs-lookup"><span data-stu-id="9da11-239">The volume is locked.</span></span> |
   | **<span data-ttu-id="9da11-240">FVE_E_PROTECTOR_NOT_FOUND</span><span class="sxs-lookup"><span data-stu-id="9da11-240">FVE_E_PROTECTOR_NOT_FOUND</span></span>**<br /><span data-ttu-id="9da11-241">2150694963 (0x80310033)</span><span class="sxs-lookup"><span data-stu-id="9da11-241">2150694963 (0x80310033)</span></span> | <span data-ttu-id="9da11-242">Non è stato trovato un Protector password numerico per il volume.</span><span class="sxs-lookup"><span data-stu-id="9da11-242">A Numerical Password protector was not found for the volume.</span></span> |
   | **<span data-ttu-id="9da11-243">WS_E_ENDPOINT_ACCESS_DENIED</span><span class="sxs-lookup"><span data-stu-id="9da11-243">WS_E_ENDPOINT_ACCESS_DENIED</span></span>**<br /><span data-ttu-id="9da11-244">2151481349 (0x803D0005)</span><span class="sxs-lookup"><span data-stu-id="9da11-244">2151481349 (0x803D0005)</span></span> | <span data-ttu-id="9da11-245">L'accesso è stato negato dall'endpoint remoto.</span><span class="sxs-lookup"><span data-stu-id="9da11-245">Access was denied by the remote endpoint.</span></span> |
   | **<span data-ttu-id="9da11-246">WS_E_ENDPOINT_NOT_FOUND</span><span class="sxs-lookup"><span data-stu-id="9da11-246">WS_E_ENDPOINT_NOT_FOUND</span></span>**<br /><span data-ttu-id="9da11-247">2151481357 (0x803D000D)</span><span class="sxs-lookup"><span data-stu-id="9da11-247">2151481357 (0x803D000D)</span></span> | <span data-ttu-id="9da11-248">L'endpoint remoto non esiste o non è possibile trovarlo.</span><span class="sxs-lookup"><span data-stu-id="9da11-248">The remote endpoint does not exist or could not be located.</span></span> |
   | **<span data-ttu-id="9da11-249">WS_E_ENDPOINT_FAILURE</span><span class="sxs-lookup"><span data-stu-id="9da11-249">WS_E_ENDPOINT_FAILURE</span></span>**<br /><span data-ttu-id="9da11-250">2151481357 (0x803D000F)</span><span class="sxs-lookup"><span data-stu-id="9da11-250">2151481357 (0x803D000F)</span></span> | <span data-ttu-id="9da11-251">L'endpoint remoto non ha potuto elaborare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="9da11-251">The remote endpoint could not process the request.</span></span> |
   | **<span data-ttu-id="9da11-252">WS_E_ENDPOINT_UNREACHABLE</span><span class="sxs-lookup"><span data-stu-id="9da11-252">WS_E_ENDPOINT_UNREACHABLE</span></span>**<br /><span data-ttu-id="9da11-253">2151481360 (0x803D0010)</span><span class="sxs-lookup"><span data-stu-id="9da11-253">2151481360 (0x803D0010)</span></span> | <span data-ttu-id="9da11-254">L'endpoint remoto non è raggiungibile.</span><span class="sxs-lookup"><span data-stu-id="9da11-254">The remote endpoint was not reachable.</span></span> |
   | **<span data-ttu-id="9da11-255">WS_E_ENDPOINT_FAULT_RECEIVED</span><span class="sxs-lookup"><span data-stu-id="9da11-255">WS_E_ENDPOINT_FAULT_RECEIVED</span></span>**<br /><span data-ttu-id="9da11-256">2151481363 (0x803D0013)</span><span class="sxs-lookup"><span data-stu-id="9da11-256">2151481363 (0x803D0013)</span></span> | <span data-ttu-id="9da11-257">Un messaggio contenente un errore è stato ricevuto dall'endpoint remoto.</span><span class="sxs-lookup"><span data-stu-id="9da11-257">A message containing a fault was received from the remote endpoint.</span></span> <span data-ttu-id="9da11-258">Verificare di essere connessi all'endpoint di servizio corretto.</span><span class="sxs-lookup"><span data-stu-id="9da11-258">Make sure you are connecting to the correct service endpoint.</span></span> |
   | **<span data-ttu-id="9da11-259">WS_E_INVALID_ENDPOINT_URL</span><span class="sxs-lookup"><span data-stu-id="9da11-259">WS_E_INVALID_ENDPOINT_URL</span></span>**<br /><span data-ttu-id="9da11-260">2151481376 (0x803D0020)</span><span class="sxs-lookup"><span data-stu-id="9da11-260">2151481376 (0x803D0020)</span></span> | <span data-ttu-id="9da11-261">L'URL dell'indirizzo endpoint non è valido.</span><span class="sxs-lookup"><span data-stu-id="9da11-261">The endpoint address URL is not valid.</span></span> <span data-ttu-id="9da11-262">L'URL deve iniziare con "http" o "https".</span><span class="sxs-lookup"><span data-stu-id="9da11-262">The URL must start with “http” or “https”.</span></span> |
     

2. **<span data-ttu-id="9da11-263">Distribuire MBAM usando Microsoft Deployment Toolkit (MDT) e PowerShell</span><span class="sxs-lookup"><span data-stu-id="9da11-263">Deploy MBAM by using Microsoft Deployment Toolkit (MDT) and PowerShell</span></span>**

   1.  <span data-ttu-id="9da11-264">In MDT creare una nuova condivisione di distribuzione o aprire una condivisione di distribuzione esistente.</span><span class="sxs-lookup"><span data-stu-id="9da11-264">In MDT, create a new deployment share or open an existing deployment share.</span></span>

       **<span data-ttu-id="9da11-265">Nota</span><span class="sxs-lookup"><span data-stu-id="9da11-265">Note</span></span>**  
       <span data-ttu-id="9da11-266">Lo `Invoke-MbamClientDeployment.ps1` script di PowerShell può essere usato con qualsiasi processo di imaging o strumento.</span><span class="sxs-lookup"><span data-stu-id="9da11-266">The `Invoke-MbamClientDeployment.ps1` PowerShell script can be used with any imaging process or tool.</span></span> <span data-ttu-id="9da11-267">Questa sezione illustra come integrarla usando MDT, ma i passaggi sono simili all'integrazione con qualsiasi altro processo o strumento.</span><span class="sxs-lookup"><span data-stu-id="9da11-267">This section shows how to integrate it by using MDT, but the steps are similar to integrating it with any other process or tool.</span></span>

       **<span data-ttu-id="9da11-268">Attenzione</span><span class="sxs-lookup"><span data-stu-id="9da11-268">Caution</span></span>**  
       <span data-ttu-id="9da11-269">Se si usa BitLocker pre-provisioning (WinPE) e si vuole mantenere il valore di autorizzazione del proprietario del TPM, è necessario aggiungere lo `SaveWinPETpmOwnerAuth.wsf` script in WinPE immediatamente prima che l'installazione venga riavviata nel sistema operativo completo.</span><span class="sxs-lookup"><span data-stu-id="9da11-269">If you are using BitLocker pre-provisioning (WinPE) and want to maintain the TPM owner authorization value, you must add the `SaveWinPETpmOwnerAuth.wsf` script in WinPE immediately before the installation reboots into the full operating system.</span></span> **<span data-ttu-id="9da11-270">Se non si usa questo script, il valore di autorizzazione del proprietario del TPM verrà perso al riavvio.</span><span class="sxs-lookup"><span data-stu-id="9da11-270">If you do not use this script, you will lose the TPM owner authorization value on reboot.</span></span>**

   2.  <span data-ttu-id="9da11-271">Copia `Invoke-MbamClientDeployment.ps1` in \*\* &lt; DeploymentShare &gt; \\Scripts\*\*.</span><span class="sxs-lookup"><span data-stu-id="9da11-271">Copy `Invoke-MbamClientDeployment.ps1` to **&lt;DeploymentShare&gt;\\Scripts**.</span></span> <span data-ttu-id="9da11-272">Se si usa il provisioning preliminare, copiare il `SaveWinPETpmOwnerAuth.wsf` file in \*\* &lt; DeploymentShare &gt; \\Scripts\*\*.</span><span class="sxs-lookup"><span data-stu-id="9da11-272">If you are using pre-provisioning, copy the `SaveWinPETpmOwnerAuth.wsf` file into **&lt;DeploymentShare&gt;\\Scripts**.</span></span>

   3.  <span data-ttu-id="9da11-273">Aggiungere l'applicazione client MBAM 2,5 SP1 al nodo applicazioni della condivisione di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="9da11-273">Add the MBAM 2.5 SP1 client application to the Applications node in the deployment share.</span></span>

       1.  <span data-ttu-id="9da11-274">Nel nodo **applicazioni** fare clic su **nuova applicazione**.</span><span class="sxs-lookup"><span data-stu-id="9da11-274">Under the **Applications** node, click **New Application**.</span></span>

       2.  <span data-ttu-id="9da11-275">Selezionare l' **applicazione con i file di origine**.</span><span class="sxs-lookup"><span data-stu-id="9da11-275">Select **Application with Source Files**.</span></span> <span data-ttu-id="9da11-276">Fai clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9da11-276">Click **Next**.</span></span>

       3.  <span data-ttu-id="9da11-277">In **nome applicazione**Digitare "MBAM 2,5 client SP1".</span><span class="sxs-lookup"><span data-stu-id="9da11-277">In **Application Name**, type “MBAM 2.5 SP1 Client”.</span></span> <span data-ttu-id="9da11-278">Fai clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9da11-278">Click **Next**.</span></span>

       4.  <span data-ttu-id="9da11-279">Passare alla directory che contiene `MBAMClientSetup-<Version>.msi` .</span><span class="sxs-lookup"><span data-stu-id="9da11-279">Browse to the directory containing `MBAMClientSetup-<Version>.msi`.</span></span> <span data-ttu-id="9da11-280">Fai clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9da11-280">Click **Next**.</span></span>

       5.  <span data-ttu-id="9da11-281">Digitare "MBAM 2,5 SP1 client" come directory da creare.</span><span class="sxs-lookup"><span data-stu-id="9da11-281">Type “MBAM 2.5 SP1 Client” as the directory to create.</span></span> <span data-ttu-id="9da11-282">Fai clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9da11-282">Click **Next**.</span></span>

       6.  <span data-ttu-id="9da11-283">Immettere `msiexec /i MBAMClientSetup-<Version>.msi /quiet` alla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="9da11-283">Enter `msiexec /i MBAMClientSetup-<Version>.msi /quiet` at the command line.</span></span> <span data-ttu-id="9da11-284">Fai clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9da11-284">Click **Next**.</span></span>

       7.  <span data-ttu-id="9da11-285">Accettare i valori predefiniti rimanenti per completare la procedura guidata nuova applicazione.</span><span class="sxs-lookup"><span data-stu-id="9da11-285">Accept the remaining defaults to complete the New Application wizard.</span></span>

   4.  <span data-ttu-id="9da11-286">In MDT fare clic con il pulsante destro del mouse sul nome della condivisione di distribuzione e scegliere **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="9da11-286">In MDT, right-click the name of the deployment share and click **Properties**.</span></span> <span data-ttu-id="9da11-287">Fare clic sulla scheda **regole** . aggiungere le righe seguenti:</span><span class="sxs-lookup"><span data-stu-id="9da11-287">Click the **Rules** tab. Add the following lines:</span></span>

       `SkipBitLocker=YES``BDEInstall=TPM``BDEInstallSuppress=NO``BDEWaitForEncryption=YES`

       <span data-ttu-id="9da11-288">Fare clic su OK per chiudere la finestra.</span><span class="sxs-lookup"><span data-stu-id="9da11-288">Click OK to close the window.</span></span>

   5.  <span data-ttu-id="9da11-289">Nel nodo sequenze attività modificare una sequenza di attività esistente usata per la distribuzione di Windows.</span><span class="sxs-lookup"><span data-stu-id="9da11-289">Under the Task Sequences node, edit an existing task sequence used for Windows Deployment.</span></span> <span data-ttu-id="9da11-290">Se si vuole, è possibile creare una nuova sequenza di attività facendo clic con il pulsante destro del mouse sul nodo **sequenze attività** , selezionando **nuova sequenza di attività**e completando la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="9da11-290">If you want, you can create a new task sequence by right-clicking the **Task Sequences** node, selecting **New Task Sequence**, and completing the wizard.</span></span>

       <span data-ttu-id="9da11-291">Nella scheda **sequenza attività** della sequenza di attività selezionata eseguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="9da11-291">On the **Task Sequence** tab of the selected task sequence, perform these steps:</span></span>

       1.  <span data-ttu-id="9da11-292">Nella cartella **Preinstall** abilitare l'attività facoltativa **abilitare BitLocker (offline)** se si vuole che BitLocker sia abilitato in WinPE, che esegue la crittografia solo dello spazio usato.</span><span class="sxs-lookup"><span data-stu-id="9da11-292">Under the **Preinstall** folder, enable the optional task **Enable BitLocker (Offline)** if you want BitLocker enabled in WinPE, which encrypts used space only.</span></span>

       2.  <span data-ttu-id="9da11-293">Per rendere persistente il TPM OwnerAuth quando si usa il pre-provisioning, per consentire a MBAM di escrowlo in seguito, eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9da11-293">To persist TPM OwnerAuth when using pre-provisioning, allowing MBAM to escrow it later, do the following:</span></span>

           1.  <span data-ttu-id="9da11-294">Trovare il passaggio per l' **installazione del sistema operativo**</span><span class="sxs-lookup"><span data-stu-id="9da11-294">Find the **Install Operating System** step</span></span>

           2.  <span data-ttu-id="9da11-295">Aggiungere un nuovo passaggio della **riga di comando Esegui**</span><span class="sxs-lookup"><span data-stu-id="9da11-295">Add a new **Run Command Line** step after it</span></span>

           3.  <span data-ttu-id="9da11-296">Denominare il passaggio **persist TPM OwnerAuth**</span><span class="sxs-lookup"><span data-stu-id="9da11-296">Name the step **Persist TPM OwnerAuth**</span></span>

           4.  <span data-ttu-id="9da11-297">Impostare la riga di comando su `cscript.exe "%SCRIPTROOT%/SaveWinPETpmOwnerAuth.wsf"`
            **Nota:** per Windows 10, versione 1607 o successiva, solo Windows può assumere la proprietà del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-297">Set the command line to `cscript.exe "%SCRIPTROOT%/SaveWinPETpmOwnerAuth.wsf"`
**Note:** For Windows 10, version 1607 or later, only Windows can take ownership of the TPM.</span></span> <span data-ttu-id="9da11-298">In addiiton Windows non manterrà la password del proprietario del TPM durante il provisioning del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-298">In addiiton, Windows will not retain the TPM owner password when provisioning the TPM.</span></span> <span data-ttu-id="9da11-299">Per ulteriori informazioni, vedere [password del proprietario del TPM](https://docs.microsoft.com/windows/security/hardware-protection/tpm/change-the-tpm-owner-password) .</span><span class="sxs-lookup"><span data-stu-id="9da11-299">See [TPM owner password](https://docs.microsoft.com/windows/security/hardware-protection/tpm/change-the-tpm-owner-password) for further details.</span></span>

       3.  <span data-ttu-id="9da11-300">Nella cartella **Ripristino stato** eliminare l'attività **Abilita BitLocker** .</span><span class="sxs-lookup"><span data-stu-id="9da11-300">In the **State Restore** folder, delete the **Enable BitLocker** task.</span></span>

       4.  <span data-ttu-id="9da11-301">Nella cartella **ripristino dello stato** in **attività personalizzate**creare una nuova attività di **installazione dell'applicazione** e denominarla **Install mbam Agent**.</span><span class="sxs-lookup"><span data-stu-id="9da11-301">In the **State Restore** folder under **Custom Tasks**, create a new **Install Application** task and name it **Install MBAM Agent**.</span></span> <span data-ttu-id="9da11-302">Fare clic sul pulsante di opzione **Installa singola applicazione** e passare all'applicazione client MBAM 2,5 SP1 creata in precedenza.</span><span class="sxs-lookup"><span data-stu-id="9da11-302">Click the **Install Single Application** radio button and browse to the MBAM 2.5 SP1 client application created earlier.</span></span>

       5.  <span data-ttu-id="9da11-303">Nella cartella **ripristino dello stato** in **attività personalizzate**creare una nuova attività di **script di PowerShell** per l'esecuzione (dopo il passaggio di applicazione client MBAM 2,5 SP1) con le impostazioni seguenti (aggiornare i parametri come appropriato per l'ambiente):</span><span class="sxs-lookup"><span data-stu-id="9da11-303">In the **State Restore** folder under **Custom Tasks**, create a new **Run PowerShell Script** task (after the MBAM 2.5 SP1 Client application step) with the following settings (update the parameters as appropriate for your environment):</span></span>

           -   <span data-ttu-id="9da11-304">Nome: configurare BitLocker per MBAM</span><span class="sxs-lookup"><span data-stu-id="9da11-304">Name: Configure BitLocker for MBAM</span></span>

           -   <span data-ttu-id="9da11-305">Script di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="9da11-305">PowerShell script:</span></span> `Invoke-MbamClientDeployment.ps1`

           -   <span data-ttu-id="9da11-306">Parametri</span><span class="sxs-lookup"><span data-stu-id="9da11-306">Parameters:</span></span>

               <table>
               <colgroup>
               <col width="33%" />
               <col width="33%" />
               <col width="33%" />
               </colgroup>
               <tbody>
               <tr class="odd">
               <td align="left"><p><span data-ttu-id="9da11-307">-RecoveryServiceEndpoint</span><span class="sxs-lookup"><span data-stu-id="9da11-307">-RecoveryServiceEndpoint</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-308">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="9da11-308">Required</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-309">Endpoint del servizio di ripristino MBAM</span><span class="sxs-lookup"><span data-stu-id="9da11-309">MBAM recovery service endpoint</span></span></p></td>
               </tr>
               <tr class="even">
               <td align="left"><p><span data-ttu-id="9da11-310">-StatusReportingServiceEndpoint</span><span class="sxs-lookup"><span data-stu-id="9da11-310">-StatusReportingServiceEndpoint</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-311">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="9da11-311">Optional</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-312">Endpoint del servizio Reporting di stato MBAM</span><span class="sxs-lookup"><span data-stu-id="9da11-312">MBAM status reporting service endpoint</span></span></p></td>
               </tr>
               <tr class="odd">
               <td align="left"><p><span data-ttu-id="9da11-313">-EncryptionMethod</span><span class="sxs-lookup"><span data-stu-id="9da11-313">-EncryptionMethod</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-314">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="9da11-314">Optional</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-315">Metodo di crittografia (impostazione predefinita: AES 128)</span><span class="sxs-lookup"><span data-stu-id="9da11-315">Encryption method (default: AES 128)</span></span></p></td>
               </tr>
               <tr class="even">
               <td align="left"><p><span data-ttu-id="9da11-316">-EncryptAndEscrowDataVolume</span><span class="sxs-lookup"><span data-stu-id="9da11-316">-EncryptAndEscrowDataVolume</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-317">Opzione</span><span class="sxs-lookup"><span data-stu-id="9da11-317">Switch</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-318">Specificare per crittografare i volumi di dati e i tasti di ripristino del volume di dati escrow</span><span class="sxs-lookup"><span data-stu-id="9da11-318">Specify to encrypt data volume(s) and escrow data volume recovery key(s)</span></span></p></td>
               </tr>
               <tr class="odd">
               <td align="left"><p><span data-ttu-id="9da11-319">-WaitForEncryptionToComplete</span><span class="sxs-lookup"><span data-stu-id="9da11-319">-WaitForEncryptionToComplete</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-320">Opzione</span><span class="sxs-lookup"><span data-stu-id="9da11-320">Switch</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-321">Specificare per attendere il completamento della crittografia</span><span class="sxs-lookup"><span data-stu-id="9da11-321">Specify to wait for the encryption to complete</span></span></p></td>
               </tr>
               <tr class="even">
               <td align="left"><p><span data-ttu-id="9da11-322">-DoNotResumeSuspendedEncryption</span><span class="sxs-lookup"><span data-stu-id="9da11-322">-DoNotResumeSuspendedEncryption</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-323">Opzione</span><span class="sxs-lookup"><span data-stu-id="9da11-323">Switch</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-324">Specificare che lo script di distribuzione non riprende la crittografia sospesa</span><span class="sxs-lookup"><span data-stu-id="9da11-324">Specify that the deployment script will not resume suspended encryption</span></span></p></td>
               </tr>
               <tr class="odd">
               <td align="left"><p><span data-ttu-id="9da11-325">-IgnoreEscrowOwnerAuthFailure</span><span class="sxs-lookup"><span data-stu-id="9da11-325">-IgnoreEscrowOwnerAuthFailure</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-326">Opzione</span><span class="sxs-lookup"><span data-stu-id="9da11-326">Switch</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-327">Specificare per ignorare l'errore di escrow Owner-auth.</span><span class="sxs-lookup"><span data-stu-id="9da11-327">Specify to ignore TPM owner-auth escrow failure.</span></span> <span data-ttu-id="9da11-328">Dovrebbe essere usato negli scenari in cui MBAM non è in grado di leggere il TPM owner-auth, ad esempio se è abilitato il provisioning automatico TPM</span><span class="sxs-lookup"><span data-stu-id="9da11-328">It should be used in the scenarios where MBAM is not able to read the TPM owner-auth, e.g. if TPM auto provisioning is enabled</span></span></p></td>
               </tr>
               <tr class="even">
               <td align="left"><p><span data-ttu-id="9da11-329">-IgnoreEscrowRecoveryKeyFailure</span><span class="sxs-lookup"><span data-stu-id="9da11-329">-IgnoreEscrowRecoveryKeyFailure</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-330">Opzione</span><span class="sxs-lookup"><span data-stu-id="9da11-330">Switch</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-331">Specificare per ignorare l'errore della chiave di recupero del volume</span><span class="sxs-lookup"><span data-stu-id="9da11-331">Specify to ignore volume recovery key escrow failure</span></span></p></td>
               </tr>
               <tr class="odd">
               <td align="left"><p><span data-ttu-id="9da11-332">-IgnoreReportStatusFailure</span><span class="sxs-lookup"><span data-stu-id="9da11-332">-IgnoreReportStatusFailure</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-333">Opzione</span><span class="sxs-lookup"><span data-stu-id="9da11-333">Switch</span></span></p></td>
               <td align="left"><p><span data-ttu-id="9da11-334">Specificare per ignorare l'errore di segnalazione dello stato</span><span class="sxs-lookup"><span data-stu-id="9da11-334">Specify to ignore status reporting failure</span></span></p></td>
               </tr>
               </tbody>
               </table>

                 

**<span data-ttu-id="9da11-335">Per abilitare BitLocker con MBAM 2,5 o versioni precedenti come parte di una distribuzione di Windows</span><span class="sxs-lookup"><span data-stu-id="9da11-335">To enable BitLocker using MBAM 2.5 or earlier as part of a Windows deployment</span></span>**

1.  <span data-ttu-id="9da11-336">Installare il client MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-336">Install the MBAM Client.</span></span> <span data-ttu-id="9da11-337">Per istruzioni, Vedi [come distribuire il client mbam usando una riga di comando](how-to-deploy-the-mbam-client-by-using-a-command-line.md).</span><span class="sxs-lookup"><span data-stu-id="9da11-337">For instructions, see [How to Deploy the MBAM Client by Using a Command Line](how-to-deploy-the-mbam-client-by-using-a-command-line.md).</span></span>

2.  <span data-ttu-id="9da11-338">Aggiungere il computer a un dominio (scelta consigliata).</span><span class="sxs-lookup"><span data-stu-id="9da11-338">Join the computer to a domain (recommended).</span></span>

    -   <span data-ttu-id="9da11-339">Se il computer non è collegato a un dominio, la password di ripristino non viene archiviata nel servizio di ripristino di chiave MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-339">If the computer is not joined to a domain, the recovery password is not stored in the MBAM Key Recovery service.</span></span> <span data-ttu-id="9da11-340">Per impostazione predefinita, MBAM non consente la crittografia a meno che non sia possibile archiviare la chiave di ripristino.</span><span class="sxs-lookup"><span data-stu-id="9da11-340">By default, MBAM does not allow encryption to occur unless the recovery key can be stored.</span></span>

    -   <span data-ttu-id="9da11-341">Se un computer viene avviato in modalità di ripristino prima che la chiave di ripristino sia archiviata nel server MBAM, non è disponibile alcun metodo di ripristino e il computer deve essere rielaborato.</span><span class="sxs-lookup"><span data-stu-id="9da11-341">If a computer starts in recovery mode before the recovery key is stored on the MBAM Server, no recovery method is available, and the computer has to be reimaged.</span></span>

3.  <span data-ttu-id="9da11-342">Aprire un prompt dei comandi come amministratore e arrestare il servizio MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-342">Open a command prompt as an administrator, and stop the MBAM service.</span></span>

4.  <span data-ttu-id="9da11-343">Impostare il servizio su **manuale** o **su richiesta** digitando i comandi seguenti:</span><span class="sxs-lookup"><span data-stu-id="9da11-343">Set the service to **Manual** or **On demand** by typing the following commands:</span></span>

    **<span data-ttu-id="9da11-344">NET STOP mbamagent</span><span class="sxs-lookup"><span data-stu-id="9da11-344">net stop mbamagent</span></span>**

    **<span data-ttu-id="9da11-345">sc config mbamagent start = demand</span><span class="sxs-lookup"><span data-stu-id="9da11-345">sc config mbamagent start= demand</span></span>**

5.  <span data-ttu-id="9da11-346">Imposta i valori del registro di sistema in modo che il client MBAM ignori le impostazioni dei criteri di gruppo e invece imposti la crittografia per avviare l'ora di distribuzione di Windows nel computer client.</span><span class="sxs-lookup"><span data-stu-id="9da11-346">Set the registry values so that the MBAM Client ignores the Group Policy settings and instead sets encryption to start the time Windows is deployed to that client computer.</span></span>

    <span data-ttu-id="9da11-347">**Attenzione**  Questo passaggio descrive come modificare il registro di sistema di Windows.</span><span class="sxs-lookup"><span data-stu-id="9da11-347">**Caution** This step describes how to modify the Windows registry.</span></span> <span data-ttu-id="9da11-348">L'uso errato dell'editor del registro di sistema può causare seri problemi che possono richiedere la reinstallazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="9da11-348">Using Registry Editor incorrectly can cause serious issues that can require you to reinstall Windows.</span></span> <span data-ttu-id="9da11-349">Non è possibile garantire che i problemi risultanti dall'uso errato dell'editor del registro di sistema possano essere risolti.</span><span class="sxs-lookup"><span data-stu-id="9da11-349">We cannot guarantee that issues resulting from the incorrect use of Registry Editor can be resolved.</span></span> <span data-ttu-id="9da11-350">Usare l'editor del registro di sistema a proprio rischio.</span><span class="sxs-lookup"><span data-stu-id="9da11-350">Use Registry Editor at your own risk.</span></span>

    1.  <span data-ttu-id="9da11-351">Impostare il TPM per il **sistema operativo solo**per la crittografia, eseguire Regedit.exe e quindi importare il modello di chiave del registro di C:\\Programmi Files\\Microsoft\\MDOP MBAM\\MBAMDeploymentKeyTemplate.reg.</span><span class="sxs-lookup"><span data-stu-id="9da11-351">Set the TPM for **Operating system only encryption**, run Regedit.exe, and then import the registry key template from C:\\Program Files\\Microsoft\\MDOP MBAM\\MBAMDeploymentKeyTemplate.reg.</span></span>

    2.  <span data-ttu-id="9da11-352">In Regedit.exe accedere a HKLM\\SOFTWARE\\Microsoft\\MBAM e configurare le impostazioni elencate nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="9da11-352">In Regedit.exe, go to HKLM\\SOFTWARE\\Microsoft\\MBAM, and configure the settings that are listed in the following table.</span></span>

        <span data-ttu-id="9da11-353">**Nota**  Puoi impostare le impostazioni dei criteri di gruppo o i valori del registro di sistema correlati a MBAM qui.</span><span class="sxs-lookup"><span data-stu-id="9da11-353">**Note** You can set Group Policy settings or registry values related to MBAM here.</span></span> <span data-ttu-id="9da11-354">Queste impostazioni sovrascriveranno i valori impostati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="9da11-354">These settings will override previously set values.</span></span>

        <span data-ttu-id="9da11-355">Impostazioni di configurazione della voce del registro di sistema</span><span class="sxs-lookup"><span data-stu-id="9da11-355">Registry entry Configuration settings</span></span>

        <span data-ttu-id="9da11-356">DeploymentTime</span><span class="sxs-lookup"><span data-stu-id="9da11-356">DeploymentTime</span></span>

        <span data-ttu-id="9da11-357">0 = disattivato</span><span class="sxs-lookup"><span data-stu-id="9da11-357">0 = Off</span></span>

        <span data-ttu-id="9da11-358">1 = usare le impostazioni dei criteri per il tempo di distribuzione (impostazione predefinita): usare questa impostazione per abilitare la crittografia al momento della distribuzione di Windows nel computer client.</span><span class="sxs-lookup"><span data-stu-id="9da11-358">1 = Use deployment time policy settings (default) – use this setting to enable encryption at the time Windows is deployed to the client computer.</span></span>

        <span data-ttu-id="9da11-359">UseKeyRecoveryService</span><span class="sxs-lookup"><span data-stu-id="9da11-359">UseKeyRecoveryService</span></span>

        <span data-ttu-id="9da11-360">0 = non usare l'escrow Key (le due voci del registro di sistema successive non sono necessarie in questo caso)</span><span class="sxs-lookup"><span data-stu-id="9da11-360">0 = Do not use key escrow (the next two registry entries are not required in this case)</span></span>

        <span data-ttu-id="9da11-361">1 = usare l'escrow Key nel sistema di recupero chiavi (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="9da11-361">1 = Use key escrow in Key Recovery system (default)</span></span>

        <span data-ttu-id="9da11-362">Questa è l'impostazione consigliata, che consente a MBAM di archiviare le chiavi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="9da11-362">This is the recommended setting, which enables MBAM to store the recovery keys.</span></span> <span data-ttu-id="9da11-363">Il computer deve essere in grado di comunicare con il servizio di ripristino tramite MBAM Key.</span><span class="sxs-lookup"><span data-stu-id="9da11-363">The computer must be able to communicate with the MBAM Key Recovery service.</span></span> <span data-ttu-id="9da11-364">Verificare che il computer sia in grado di comunicare con il servizio prima di procedere.</span><span class="sxs-lookup"><span data-stu-id="9da11-364">Verify that the computer can communicate with the service before you proceed.</span></span>

        <span data-ttu-id="9da11-365">KeyRecoveryOptions</span><span class="sxs-lookup"><span data-stu-id="9da11-365">KeyRecoveryOptions</span></span>

        <span data-ttu-id="9da11-366">0 = carica solo il tasto di ripristino</span><span class="sxs-lookup"><span data-stu-id="9da11-366">0 = Uploads Recovery Key only</span></span>

        <span data-ttu-id="9da11-367">1 = carica il tasto di ripristino e il pacchetto di ripristino della chiave (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="9da11-367">1 = Uploads Recovery Key and Key Recovery Package (default)</span></span>

        <span data-ttu-id="9da11-368">KeyRecoveryServiceEndPoint</span><span class="sxs-lookup"><span data-stu-id="9da11-368">KeyRecoveryServiceEndPoint</span></span>

        <span data-ttu-id="9da11-369">Imposta questo valore sull'URL per il server che gestisce il servizio di recupero chiavi, ad esempio http:// &lt; nome computer &gt; /MBAMRecoveryAndHardwareService/CoreService.svc.</span><span class="sxs-lookup"><span data-stu-id="9da11-369">Set this value to the URL for the server running the Key Recovery service, for example, http://&lt;computer name&gt;/MBAMRecoveryAndHardwareService/CoreService.svc.</span></span>


6.  <span data-ttu-id="9da11-370">Il client MBAM ricomincerà il sistema durante la distribuzione del client MBAM.</span><span class="sxs-lookup"><span data-stu-id="9da11-370">The MBAM Client will restart the system during the MBAM Client deployment.</span></span> <span data-ttu-id="9da11-371">Quando si è pronti per il riavvio, eseguire il comando seguente al prompt dei comandi come amministratore:</span><span class="sxs-lookup"><span data-stu-id="9da11-371">When you are ready for this restart, run the following command at a command prompt as an administrator:</span></span>

    **<span data-ttu-id="9da11-372">NET Start mbamagent</span><span class="sxs-lookup"><span data-stu-id="9da11-372">net start mbamagent</span></span>**

7.  <span data-ttu-id="9da11-373">Quando il computer viene riavviato e il BIOS richiede di accettare la modifica del TPM.</span><span class="sxs-lookup"><span data-stu-id="9da11-373">When the computers restarts, and the BIOS prompts you, accept the TPM change.</span></span>

8.  <span data-ttu-id="9da11-374">Durante il processo di imaging del sistema operativo client Windows, quando si è pronti per avviare la crittografia, aprire un prompt dei comandi come amministratore e digitare i comandi seguenti per impostare l'avvio **automatico** e riavviare l'agente client mbam:</span><span class="sxs-lookup"><span data-stu-id="9da11-374">During the Windows client operating system imaging process, when you are ready to start encryption, open a command prompt as an administrator, and type the following commands to set the start to **Automatic** and to restart the MBAM Client agent:</span></span>

    **<span data-ttu-id="9da11-375">sc config mbamagent Start = automatico</span><span class="sxs-lookup"><span data-stu-id="9da11-375">sc config mbamagent start= auto</span></span>**

    **<span data-ttu-id="9da11-376">NET Start mbamagent</span><span class="sxs-lookup"><span data-stu-id="9da11-376">net start mbamagent</span></span>**

9.  <span data-ttu-id="9da11-377">Per eliminare i valori di bypass del registro di sistema, eseguire Regedit.exe e passare alla voce del registro di sistema HKLM\\SOFTWARE\\Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9da11-377">To delete the bypass registry values, run Regedit.exe, and go to the HKLM\\SOFTWARE\\Microsoft registry entry.</span></span> <span data-ttu-id="9da11-378">Fare clic con il pulsante destro del mouse sul nodo **mbam** e quindi scegliere **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="9da11-378">Right-click the **MBAM** node, and then click **Delete**.</span></span>

## <span data-ttu-id="9da11-379">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="9da11-379">Related topics</span></span>

[<span data-ttu-id="9da11-380">Distribuzione del client di MBAM 2.5</span><span class="sxs-lookup"><span data-stu-id="9da11-380">Deploying the MBAM 2.5 Client</span></span>](deploying-the-mbam-25-client.md)

[<span data-ttu-id="9da11-381">Pianificazione della distribuzione del client di MBAM 2.5</span><span class="sxs-lookup"><span data-stu-id="9da11-381">Planning for MBAM 2.5 Client Deployment</span></span>](planning-for-mbam-25-client-deployment.md)

## <span data-ttu-id="9da11-382">Hai un suggerimento per MBAM?</span><span class="sxs-lookup"><span data-stu-id="9da11-382">Got a suggestion for MBAM?</span></span>
- <span data-ttu-id="9da11-383">Aggiungere o votare i suggerimenti [qui](http://mbam.uservoice.com/forums/268571-microsoft-bitlocker-administration-and-monitoring).</span><span class="sxs-lookup"><span data-stu-id="9da11-383">Add or vote on suggestions [here](http://mbam.uservoice.com/forums/268571-microsoft-bitlocker-administration-and-monitoring).</span></span>
- <span data-ttu-id="9da11-384">Per i problemi di MBAM, usa il [Forum di mbam TechNet](https://social.technet.microsoft.com/Forums/home?forum=mdopmbam).</span><span class="sxs-lookup"><span data-stu-id="9da11-384">For MBAM issues, use the [MBAM TechNet Forum](https://social.technet.microsoft.com/Forums/home?forum=mdopmbam).</span></span>
