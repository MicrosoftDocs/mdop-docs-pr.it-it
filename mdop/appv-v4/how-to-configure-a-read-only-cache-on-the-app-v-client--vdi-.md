---
title: Come configurare una cache di sola lettura sul client App-V (VDI)
description: Come configurare una cache di sola lettura sul client App-V (VDI)
author: dansimp
ms.assetid: 7a41e017-9e23-4a6a-a659-04d23f008b83
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 114f9dfbf55a3f62b6bc8bec6b37a659ffbfaf56
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/26/2020
ms.locfileid: "10817945"
---
# <span data-ttu-id="8be5f-103">Come configurare una cache di sola lettura sul client App-V (VDI)</span><span class="sxs-lookup"><span data-stu-id="8be5f-103">How to Configure a Read-only Cache on the App-V Client (VDI)</span></span>


<span data-ttu-id="8be5f-104">In Microsoft Application Virtualization (App-V) 4,6 il client supporta l'uso di una cache di sola lettura condivisa.</span><span class="sxs-lookup"><span data-stu-id="8be5f-104">In Microsoft Application Virtualization (App-V) 4.6 the Client supports using a shared read-only cache.</span></span> <span data-ttu-id="8be5f-105">La cache di sola lettura condivisa consente al client di usare in modo efficiente lo spazio su disco in un sistema VDI (Virtual Desktop Infrastructure), in cui gli utenti eseguono applicazioni in macchine virtuali ospitate in un ambiente server Data Center e condividono l'archiviazione di rete in una rete di area di archiviazione (SAN).</span><span class="sxs-lookup"><span data-stu-id="8be5f-105">The shared read-only cache enables the Client to use disk space efficiently in a Virtual Desktop Infrastructure (VDI) system, where users run applications on Virtual Machines (VM) that are hosted in a data center server environment and share network storage on a Storage Area Network (SAN).</span></span> <span data-ttu-id="8be5f-106">Le procedure seguenti includono una panoramica del processo necessario per implementare il client App-V in una delle architetture VDI primarie, note come "VM in pool" o "VM statica".</span><span class="sxs-lookup"><span data-stu-id="8be5f-106">The following procedures provide an overview of the process that is required to implement the App-V Client in either of the primary VDI architectures, known as “Pooled VM” or “Static VM”.</span></span> <span data-ttu-id="8be5f-107">Si presuppone che tu abbia familiarità con la pianificazione, la distribuzione e il funzionamento del sistema App-V e dei relativi componenti, oltre che per l'operazione e la gestione del server VDI.</span><span class="sxs-lookup"><span data-stu-id="8be5f-107">It is assumed that you are familiar with the planning, deployment, and operation of the App-V system and its components, and also the operation and management of the VDI server.</span></span> <span data-ttu-id="8be5f-108">Per altre informazioni su App-V, Vedi [virtualizzazione delle applicazioni](https://go.microsoft.com/fwlink/?LinkId=122939) (https://go.microsoft.com/fwlink/?LinkId=122939)</span><span class="sxs-lookup"><span data-stu-id="8be5f-108">For more information about App-V, see [Application Virtualization](https://go.microsoft.com/fwlink/?LinkId=122939) (https://go.microsoft.com/fwlink/?LinkId=122939)</span></span>

<span data-ttu-id="8be5f-109">**Nota**  I dettagli descritti in queste procedure sono intesi solo come esempi.</span><span class="sxs-lookup"><span data-stu-id="8be5f-109">**Note** The details outlined in these procedures are intended as examples only.</span></span> <span data-ttu-id="8be5f-110">Per completare il processo globale, è possibile usare metodi diversi.</span><span class="sxs-lookup"><span data-stu-id="8be5f-110">You might use different methods to complete the overall process.</span></span>

 

## <span data-ttu-id="8be5f-111">Distribuzione del client App-V in uno scenario VDI</span><span class="sxs-lookup"><span data-stu-id="8be5f-111">Deploying the App-V Client in a VDI Scenario</span></span>


<span data-ttu-id="8be5f-112">Puoi distribuire il client App-V in uno scenario VDI usando una cache di sola lettura condivisa che è stata popolata con tutte le applicazioni necessarie per tutti gli utenti.</span><span class="sxs-lookup"><span data-stu-id="8be5f-112">You can deploy the App-V Client in a VDI scenario by using a shared read-only cache that has been populated with all the applications required for all users.</span></span> <span data-ttu-id="8be5f-113">Si configura quindi l'immagine di VM Master VDI in modo che tutti i client App-V usino lo stesso file di cache.</span><span class="sxs-lookup"><span data-stu-id="8be5f-113">You then configure the VDI Master VM Image so that all the App-V Clients use the same cache file.</span></span> <span data-ttu-id="8be5f-114">Agli utenti viene concesso l'accesso a specifiche applicazioni tramite il processo di pubblicazione App-V.</span><span class="sxs-lookup"><span data-stu-id="8be5f-114">Users are granted access to specific applications by using the App-V publishing process.</span></span> <span data-ttu-id="8be5f-115">Dato che la cache è già precaricata con tutte le applicazioni, nessun flusso si verifica quando un utente avvia un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-115">Since the cache is already preloaded with all applications, no streaming occurs when a user starts an application.</span></span> <span data-ttu-id="8be5f-116">Tuttavia, i pacchetti usati per prepopolare la cache devono essere inseriti in un server App-V che supporta il flusso RTSP (Real Time Streaming Protocol) e che concede le autorizzazioni di accesso ai client App-V.</span><span class="sxs-lookup"><span data-stu-id="8be5f-116">However, the packages used to prepopulate the cache must be put on an App-V server that supports Real Time Streaming Protocol (RTSP) streaming and that grants access permissions to the App-V Clients.</span></span> <span data-ttu-id="8be5f-117">Se pubblichi le applicazioni usando un server di gestione di App-V, puoi usarlo per ottenere questa funzione di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be5f-117">If you publish the applications by using an App-V Management Server, you can use it to provide this streaming function.</span></span>

<span data-ttu-id="8be5f-118">Il processo di distribuzione è costituito da quattro attività principali:</span><span class="sxs-lookup"><span data-stu-id="8be5f-118">The deployment process consists of four primary tasks:</span></span>

-   <span data-ttu-id="8be5f-119">Creazione e popolamento del file della cache condivisa Master</span><span class="sxs-lookup"><span data-stu-id="8be5f-119">Creating and populating the master shared cache file</span></span>

-   <span data-ttu-id="8be5f-120">Copia del file della cache condivisa nell'archiviazione del server VDI</span><span class="sxs-lookup"><span data-stu-id="8be5f-120">Copying the shared cache file to the VDI server storage</span></span>

-   <span data-ttu-id="8be5f-121">Configurazione del software client App-V nell'immagine master VDI</span><span class="sxs-lookup"><span data-stu-id="8be5f-121">Configuring the App-V client software on the VDI Master Image</span></span>

-   <span data-ttu-id="8be5f-122">Gestione del ciclo di aggiornamento della distribuzione per il file della cache condivisa dopo la distribuzione iniziale</span><span class="sxs-lookup"><span data-stu-id="8be5f-122">Managing the update deployment cycle for the shared cache file after the initial deployment</span></span>

<span data-ttu-id="8be5f-123">Queste attività richiedono una pianificazione accurata.</span><span class="sxs-lookup"><span data-stu-id="8be5f-123">These tasks require careful planning.</span></span> <span data-ttu-id="8be5f-124">Ti consigliamo di preparare e documentare un processo metodico e riproducibile per l'organizzazione da seguire.</span><span class="sxs-lookup"><span data-stu-id="8be5f-124">We recommend that you prepare and document a methodical, reproducible process for your organization to follow.</span></span> <span data-ttu-id="8be5f-125">Questo aspetto è particolarmente importante per la preparazione e la distribuzione iniziali del file della cache condivisa master e per la gestione continua degli aggiornamenti delle applicazioni, ognuno dei quali richiede un aggiornamento alla cache condivisa master.</span><span class="sxs-lookup"><span data-stu-id="8be5f-125">This is especially important for the initial preparation and deployment of the master shared cache file, and for the on-going management of application updates, each of which require an update to the master shared cache.</span></span> <span data-ttu-id="8be5f-126">Per completare queste attività primarie, usare le procedure seguenti.</span><span class="sxs-lookup"><span data-stu-id="8be5f-126">Use the following procedures to complete these primary tasks.</span></span>

<span data-ttu-id="8be5f-127">**Nota**  Anche se è possibile pubblicare le applicazioni usando diversi metodi, le procedure seguenti si basano sull'uso di un'app-V Management Server per la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-127">**Note** Although you can publish the applications by using several different methods, the following procedures are based on the use of an App-V Management Server for publishing.</span></span>

 

**<span data-ttu-id="8be5f-128">Per configurare la cache di sola lettura per la distribuzione iniziale in uno scenario di VM VDI o VM statica in pool</span><span class="sxs-lookup"><span data-stu-id="8be5f-128">To configure the read-only cache for initial deployment in a Pooled VM VDI or Static VM VDI scenario</span></span>**

1. <span data-ttu-id="8be5f-129">Configurazione e configurazione di un server di gestione App-V in una VM nel server VDI per consentire l'autenticazione utente e il supporto della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-129">Set up and configure an App-V Management Server in a VM on the VDI server to provide user authentication and publishing support.</span></span>

2. <span data-ttu-id="8be5f-130">Popolare la cartella contenuto di questo server di gestione con tutti i pacchetti di applicazioni necessari per tutti gli utenti.</span><span class="sxs-lookup"><span data-stu-id="8be5f-130">Populate the Content folder of this Management Server with all the application packages required for all users.</span></span>

3. <span data-ttu-id="8be5f-131">Configurare un computer di staging in cui è installato il client App-V.</span><span class="sxs-lookup"><span data-stu-id="8be5f-131">Set up a staging computer that has the App-V Client installed.</span></span> <span data-ttu-id="8be5f-132">Accedere al computer di staging con un account che abbia accesso a tutte le applicazioni in modo che il set completo di applicazioni venga pubblicato nel computer e quindi eseguire il flusso delle applicazioni in cache in modo che siano completamente caricate.</span><span class="sxs-lookup"><span data-stu-id="8be5f-132">Log on to the staging computer with an account that has access to all applications so that the complete set of applications are published to the computer, and then stream the applications to cache so that they are fully loaded.</span></span>

   **<span data-ttu-id="8be5f-133">Importante</span><span class="sxs-lookup"><span data-stu-id="8be5f-133">Important</span></span>**  
   <span data-ttu-id="8be5f-134">Il computer di staging deve usare lo stesso tipo di sistema operativo e l'architettura di sistema di quelle usate dalle VM in cui verrà eseguito il client App-V.</span><span class="sxs-lookup"><span data-stu-id="8be5f-134">The staging computer must use the same operating system type and system architecture as those used by the VMs on which the App-V Client will run.</span></span>

     

4. <span data-ttu-id="8be5f-135">Riavviare il computer di staging in modalità provvisoria per verificare che i driver non siano avviati, in modo da bloccare il file della cache.</span><span class="sxs-lookup"><span data-stu-id="8be5f-135">Restart the staging computer in Safe Mode to ensure the drivers are not started, which would lock the cache file.</span></span>

   **<span data-ttu-id="8be5f-136">Nota</span><span class="sxs-lookup"><span data-stu-id="8be5f-136">Note</span></span>**  
   <span data-ttu-id="8be5f-137">In alternativa, è possibile arrestare e disabilitare il servizio di virtualizzazione dell'applicazione e quindi riavviare il computer.</span><span class="sxs-lookup"><span data-stu-id="8be5f-137">Alternatively, you can stop and disable the Application Virtualization service, and then restart the computer.</span></span> <span data-ttu-id="8be5f-138">Dopo aver copiato il file, ricordarsi di abilitare e riavviare il servizio.</span><span class="sxs-lookup"><span data-stu-id="8be5f-138">After the file has been copied, remember to enable and start the service again.</span></span>

     

5. <span data-ttu-id="8be5f-139">Copiare il file di cache Sftfs. fsd nella SAN del server VDI in cui tutte le VM possono accedervi, ad esempio in una cartella condivisa.</span><span class="sxs-lookup"><span data-stu-id="8be5f-139">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="8be5f-140">Imposta le autorizzazioni di accesso alle cartelle per la sola lettura per il gruppo Everyone e per il controllo completo per gli amministratori che gestiscono gli aggiornamenti dei file della cache.</span><span class="sxs-lookup"><span data-stu-id="8be5f-140">Set the folder access permissions to Read-only for the group Everyone and to Full Control for administrators who will manage the cache file updates.</span></span> <span data-ttu-id="8be5f-141">La posizione del file di cache può essere ottenuta dal registro di sistema AppFS\\FileName.</span><span class="sxs-lookup"><span data-stu-id="8be5f-141">The location of the cache file can be obtained from the registry AppFS\\FileName.</span></span>

   **<span data-ttu-id="8be5f-142">Importante</span><span class="sxs-lookup"><span data-stu-id="8be5f-142">Important</span></span>**  
   <span data-ttu-id="8be5f-143">È necessario inserire il file FSD in una posizione che abbia la capacità di risposta e l'affidabilità equivalenti alle prestazioni di archiviazione associate localmente, ad esempio una SAN.</span><span class="sxs-lookup"><span data-stu-id="8be5f-143">You must put the FSD file in a location that has the responsiveness and reliability equivalent to locally attached storage performance, for example, a SAN.</span></span>

     

6. <span data-ttu-id="8be5f-144">Installare il client Desktop App-V nell'immagine VDI Master VM e quindi configurarlo per l'uso della cache di sola lettura aggiungendo i valori della chiave del registro di sistema seguenti alla chiave AppFS nel client.</span><span class="sxs-lookup"><span data-stu-id="8be5f-144">Install the App-V Desktop Client on the VDI Master VM Image, and then configure it to use the read-only cache by adding the following registry key values to the AppFS key on the client.</span></span> <span data-ttu-id="8be5f-145">La chiave AppFS si trova in HKEY \ _LOCAL \ _MACHINE \\SOFTWARE\\\ [Wow6432Node\\\] Microsoft\\SoftGrid\\4.5\\Client\\AppFS.</span><span class="sxs-lookup"><span data-stu-id="8be5f-145">The AppFS key is located at HKEY\_LOCAL\_MACHINE\\SOFTWARE\\\[Wow6432Node\\\]Microsoft\\SoftGrid\\4.5\\Client\\AppFS.</span></span>

   <table>
   <colgroup>
   <col width="25%" />
   <col width="25%" />
   <col width="25%" />
   <col width="25%" />
   </colgroup>
   <thead>
   <tr class="header">
   <th align="left"><span data-ttu-id="8be5f-146">Chiave</span><span class="sxs-lookup"><span data-stu-id="8be5f-146">Key</span></span></th>
   <th align="left"><span data-ttu-id="8be5f-147">Tipo</span><span class="sxs-lookup"><span data-stu-id="8be5f-147">Type</span></span></th>
   <th align="left"><span data-ttu-id="8be5f-148">Value</span><span class="sxs-lookup"><span data-stu-id="8be5f-148">Value</span></span></th>
   <th align="left"><span data-ttu-id="8be5f-149">Scopo</span><span class="sxs-lookup"><span data-stu-id="8be5f-149">Purpose</span></span></th>
   </tr>
   </thead>
   <tbody>
   <tr class="odd">
   <td align="left"><p><span data-ttu-id="8be5f-150">FileName</span><span class="sxs-lookup"><span data-stu-id="8be5f-150">FileName</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-151">String</span><span class="sxs-lookup"><span data-stu-id="8be5f-151">String</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-152">percorso di FSD</span><span class="sxs-lookup"><span data-stu-id="8be5f-152">path to FSD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-153">Specifica il percorso del file della cache condivisa, ad esempio \VDIServername\Sharefolder\SFTFS. FSD (obbligatorio).</span><span class="sxs-lookup"><span data-stu-id="8be5f-153">Specifies the path to the shared cache file, for example, \VDIServername\Sharefolder\SFTFS.FSD (Required).</span></span></p></td>
   </tr>
   <tr class="even">
   <td align="left"><p><span data-ttu-id="8be5f-154">ReadOnlyFSD</span><span class="sxs-lookup"><span data-stu-id="8be5f-154">ReadOnlyFSD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-155">DWORD</span><span class="sxs-lookup"><span data-stu-id="8be5f-155">DWORD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-156">1</span><span class="sxs-lookup"><span data-stu-id="8be5f-156">1</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-157">Configura il client per l'uso in modalità di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="8be5f-157">Configures the client to operate in Read-Only mode.</span></span> <span data-ttu-id="8be5f-158">In questo modo, il client non tenterà di eseguire lo streaming degli aggiornamenti nella cache del pacchetto.</span><span class="sxs-lookup"><span data-stu-id="8be5f-158">This ensures that the client will not attempt to stream updates to the package cache.</span></span> <span data-ttu-id="8be5f-159">(obbligatorio).</span><span class="sxs-lookup"><span data-stu-id="8be5f-159">(Required)</span></span></p></td>
   </tr>
   <tr class="odd">
   <td align="left"><p><span data-ttu-id="8be5f-160">ErrorLogLocation</span><span class="sxs-lookup"><span data-stu-id="8be5f-160">ErrorLogLocation</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-161">String</span><span class="sxs-lookup"><span data-stu-id="8be5f-161">String</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-162">percorso del file di log degli errori (ETL)</span><span class="sxs-lookup"><span data-stu-id="8be5f-162">path to error log (.etl) file</span></span></p></td>
   <td align="left"><p><span data-ttu-id="8be5f-163">Voce usata per specificare il percorso del log degli errori.</span><span class="sxs-lookup"><span data-stu-id="8be5f-163">Entry used to specify the path to the error log.</span></span> <span data-ttu-id="8be5f-164">Consigliato.</span><span class="sxs-lookup"><span data-stu-id="8be5f-164">(Recommended.</span></span> <span data-ttu-id="8be5f-165">Usare un percorso locale come C:\Logs\Sftfs.etl).</span><span class="sxs-lookup"><span data-stu-id="8be5f-165">Use a local path such as C:\Logs\Sftfs.etl).</span></span></p></td>
   </tr>
   </tbody>
   </table>

     

7. <span data-ttu-id="8be5f-166">Configurare il client di immagine VM master per usare il server di pubblicazione e per usare l'aggiornamento della pubblicazione all'accesso.</span><span class="sxs-lookup"><span data-stu-id="8be5f-166">Configure the Master VM Image client to use the publishing server and to use publishing refresh at logon.</span></span> <span data-ttu-id="8be5f-167">Quando gli utenti accedono al sistema VDI e la loro VM viene generata dall'immagine Master VM, viene generato un ciclo di aggiornamento della pubblicazione e vengono pubblicate tutte le applicazioni per cui è autorizzato il proprio account.</span><span class="sxs-lookup"><span data-stu-id="8be5f-167">As users log on to the VDI system and their VM is built from the Master VM Image, a publishing refresh cycle occurs and publishes all the applications for which their account is authorized.</span></span> <span data-ttu-id="8be5f-168">Queste applicazioni vengono eseguite dalla cache condivisa.</span><span class="sxs-lookup"><span data-stu-id="8be5f-168">These applications are run from the shared cache.</span></span>

**<span data-ttu-id="8be5f-169">Per configurare il client per l'aggiornamento del pacchetto in uno scenario di VM in pool</span><span class="sxs-lookup"><span data-stu-id="8be5f-169">To configure the client for package upgrade in a Pooled VM scenario</span></span>**

1.  <span data-ttu-id="8be5f-170">Completare l'aggiornamento e il test del pacchetto dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-170">Complete the upgrade and testing of the application package.</span></span>

2.  <span data-ttu-id="8be5f-171">Aggiornare il pacchetto nel server App-V.</span><span class="sxs-lookup"><span data-stu-id="8be5f-171">Upgrade the package on the App-V server.</span></span> <span data-ttu-id="8be5f-172">Quindi, pubblica e trasmetti la nuova versione delle applicazioni al client nel computer di staging in modo che siano completamente caricati nella cache.</span><span class="sxs-lookup"><span data-stu-id="8be5f-172">Then, publish and stream the new version of the applications to the client on the staging computer so that they are fully loaded into cache.</span></span>

3.  <span data-ttu-id="8be5f-173">Riavviare il computer di staging in modalità provvisoria per verificare che i driver non siano avviati.</span><span class="sxs-lookup"><span data-stu-id="8be5f-173">Restart the staging computer in Safe Mode to ensure the drivers are not started.</span></span>

    <span data-ttu-id="8be5f-174">**Nota**  In alternativa, è possibile arrestare e disabilitare il servizio di virtualizzazione dell'applicazione in Services. msc e quindi riavviare il computer.</span><span class="sxs-lookup"><span data-stu-id="8be5f-174">**Note** Alternatively, you can stop and disable the Application Virtualization service in the Services.msc, and then restart the computer.</span></span> <span data-ttu-id="8be5f-175">Dopo aver copiato il file, ricordarsi di abilitare e riavviare il servizio.</span><span class="sxs-lookup"><span data-stu-id="8be5f-175">After the file has been copied, remember to enable and start the service again.</span></span>

     

4.  <span data-ttu-id="8be5f-176">Copiare il file di cache Sftfs. fsd nella SAN del server VDI in cui tutte le VM possono accedervi, ad esempio in una cartella condivisa.</span><span class="sxs-lookup"><span data-stu-id="8be5f-176">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="8be5f-177">È possibile usare un nome file diverso, ad esempio SFTFS \ _V2. FSD per distinguere la nuova versione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-177">You can use a different filename, for example, SFTFS\_V2.FSD, to distinguish the new version.</span></span>

5.  <span data-ttu-id="8be5f-178">Per configurare il client desktop di App-V nell'immagine VDI Master VM per usare il file della cache condivisa aggiornato, cambiare il valore del nome del file della chiave del registro di sistema AppFS in punto nella posizione di \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="8be5f-178">To configure the App-V Desktop Client on the VDI Master VM Image to use the updated shared cache file, change the AppFS registry key FILENAME value to point to the location of the updated file, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="8be5f-179">Quando gli utenti disconnettersi e quindi accedere di nuovo, viene creata una nuova VM usando l'immagine master aggiornata.</span><span class="sxs-lookup"><span data-stu-id="8be5f-179">When users log off and then log on again, a new VM is created for them by using the updated Master Image.</span></span> <span data-ttu-id="8be5f-180">Tutte le impostazioni utente verranno mantenute e applicate alla nuova VM.</span><span class="sxs-lookup"><span data-stu-id="8be5f-180">All their user settings will be retained and applied to the new VM.</span></span> <span data-ttu-id="8be5f-181">Hanno quindi accesso alle applicazioni aggiornate.</span><span class="sxs-lookup"><span data-stu-id="8be5f-181">Then they have access to the updated applications.</span></span>

**<span data-ttu-id="8be5f-182">Per configurare il client per l'aggiornamento del pacchetto in uno scenario VM statico</span><span class="sxs-lookup"><span data-stu-id="8be5f-182">To configure the client for package upgrade in a Static VM scenario</span></span>**

1.  <span data-ttu-id="8be5f-183">Completare l'aggiornamento e il test del pacchetto dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-183">Complete the upgrade and testing of the application package.</span></span>

2.  <span data-ttu-id="8be5f-184">Aggiornare il pacchetto nel server App-V.</span><span class="sxs-lookup"><span data-stu-id="8be5f-184">Upgrade the package on the App-V server.</span></span> <span data-ttu-id="8be5f-185">Quindi, pubblica e trasmetti la nuova versione delle applicazioni al client nel computer di staging in modo che le applicazioni siano completamente caricate nella cache.</span><span class="sxs-lookup"><span data-stu-id="8be5f-185">Then, publish and stream the new version of the applications to the client on the staging computer so that the applications are fully loaded into cache.</span></span>

3.  <span data-ttu-id="8be5f-186">Riavviare il computer di staging in modalità provvisoria per verificare che i driver non siano avviati.</span><span class="sxs-lookup"><span data-stu-id="8be5f-186">Restart the staging computer in Safe Mode to ensure that the drivers are not started.</span></span>

    <span data-ttu-id="8be5f-187">**Nota**  In alternativa, è possibile arrestare e disabilitare il servizio di virtualizzazione dell'applicazione in Services. msc e quindi riavviare il computer.</span><span class="sxs-lookup"><span data-stu-id="8be5f-187">**Note** Alternatively, you can stop and disable the Application Virtualization service in the Services.msc, and then restart the computer.</span></span> <span data-ttu-id="8be5f-188">Dopo aver copiato il file, ricordarsi di abilitare e riavviare il servizio.</span><span class="sxs-lookup"><span data-stu-id="8be5f-188">After the file has been copied, remember to enable and start the service again.</span></span>

     

4.  <span data-ttu-id="8be5f-189">Copiare il file di cache Sftfs. fsd nella SAN del server VDI in cui tutte le VM possono accedervi, ad esempio in una cartella condivisa.</span><span class="sxs-lookup"><span data-stu-id="8be5f-189">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="8be5f-190">È possibile usare un nome file diverso, ad esempio SFTFS \ _V2. FSD per distinguere la nuova versione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-190">You can use a different filename, for example, SFTFS\_V2.FSD, to distinguish the new version.</span></span>

5.  <span data-ttu-id="8be5f-191">Per configurare il client desktop di App-V nell'immagine VDI Master VM per usare il file della cache condivisa aggiornato, cambiare il valore del nome del file della chiave del registro di sistema AppFS in punto nella posizione di \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="8be5f-191">To configure the App-V Desktop Client on the VDI Master VM Image to use the updated shared cache file, change the AppFS registry key FILENAME value to point to the location of the updated file, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="8be5f-192">Questo garantisce che i nuovi utenti ottengano la nuova versione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-192">This ensures that new users get the new version.</span></span>

6.  <span data-ttu-id="8be5f-193">Creare uno script che modifichi il valore FILENAME della chiave AppFS per impostarlo nella posizione della cache aggiornata, ad esempio \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="8be5f-193">Create a script that edits the AppFS key FILENAME value to set it to the location of the updated cache, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="8be5f-194">Configurare questo script per l'esecuzione quando l'utente si disconnette o accede in modo che venga eseguito prima che i driver client App-V inizino, ad esempio, usando le impostazioni dei criteri di gruppo.</span><span class="sxs-lookup"><span data-stu-id="8be5f-194">Configure this script to run when the user logs off or logs on so that it runs before the App-V client drivers start, for example, by using Group Policy settings.</span></span> <span data-ttu-id="8be5f-195">Quando gli utenti disconnettersi e accedere di nuovo, la VM esistente viene aggiornata e utilizzerà la copia aggiornata della cache.</span><span class="sxs-lookup"><span data-stu-id="8be5f-195">When users log off and log on again, their existing VM is updated, and they will use the updated copy of the cache.</span></span> <span data-ttu-id="8be5f-196">Hanno quindi accesso alle applicazioni aggiornate.</span><span class="sxs-lookup"><span data-stu-id="8be5f-196">Then, they have access to the updated applications.</span></span>

## <span data-ttu-id="8be5f-197">Come usare i collegamenti simbolici durante l'aggiornamento della cache</span><span class="sxs-lookup"><span data-stu-id="8be5f-197">How to Use Symbolic Links when Upgrading the Cache</span></span>


<span data-ttu-id="8be5f-198">Invece di modificare il valore FILENAME della chiave AppFS ogni volta che viene distribuito un nuovo file di cache che contiene pacchetti nuovi o aggiornati, è possibile usare un collegamento simbolico nei sistemi operativi seguenti: Windows Vista, Windows 7 e Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="8be5f-198">Instead of modifying the AppFS key FILENAME value every time that a new cache file is deployed that contains new or upgraded packages, you can use a symbolic link in the following operating systems: Windows Vista, Windows 7, and Windows Server 2008.</span></span> <span data-ttu-id="8be5f-199">Per altre informazioni sui collegamenti simbolici, vedere [collegamenti simbolici](https://go.microsoft.com/fwlink/?LinkId=157626) ( https://go.microsoft.com/fwlink/?LinkId=157626) .</span><span class="sxs-lookup"><span data-stu-id="8be5f-199">For more information about symbolic links, see [Symbolic Links](https://go.microsoft.com/fwlink/?LinkId=157626) (https://go.microsoft.com/fwlink/?LinkId=157626).</span></span> <span data-ttu-id="8be5f-200">Al contrario, Windows XP non supporta l'uso di collegamenti simbolici ed è invece necessario usare i punti di giunzione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-200">In contrast, Windows XP does not support the use of symbolic links, and you must use junction points instead.</span></span> <span data-ttu-id="8be5f-201">Per altre informazioni sulle giunzioni, vedere l' [articolo 205524](https://go.microsoft.com/fwlink/?LinkId=182553) della Microsoft Knowledge base ( https://go.microsoft.com/fwlink/?LinkId=182553) e anche lo strumento [Junction v 1.05](https://go.microsoft.com/fwlink/?LinkId=182554) ( https://go.microsoft.com/fwlink/?LinkId=182554) .</span><span class="sxs-lookup"><span data-stu-id="8be5f-201">For more information about junctions, see [article 205524](https://go.microsoft.com/fwlink/?LinkId=182553) in the Microsoft Knowledge Base (https://go.microsoft.com/fwlink/?LinkId=182553), and also the tool [Junction v1.05](https://go.microsoft.com/fwlink/?LinkId=182554) (https://go.microsoft.com/fwlink/?LinkId=182554).</span></span>

**<span data-ttu-id="8be5f-202">Per configurare un collegamento simbolico per fare riferimento alla cache</span><span class="sxs-lookup"><span data-stu-id="8be5f-202">To configure a symbolic link to reference the cache</span></span>**

1.  <span data-ttu-id="8be5f-203">Durante la fase di distribuzione iniziale, aprire una finestra del prompt dei comandi come amministratore locale nel sistema operativo host VDI server.</span><span class="sxs-lookup"><span data-stu-id="8be5f-203">During the initial deployment stage, open a Command Prompt window as a local administrator on the VDI server host operating system.</span></span>

2.  <span data-ttu-id="8be5f-204">Creare un collegamento simbolico usando il comando MKLINK e quindi configurarlo in punti al file Sftfs. FSD.</span><span class="sxs-lookup"><span data-stu-id="8be5f-204">Create a symbolic link by using the MKLINK command, and then configure it to point to the Sftfs.fsd file.</span></span>

    **     <span data-ttu-id="8be5f-205">MKLINK symlinkname \\\\vdihostserver\\sharefolder\\sftfs.FSD</span><span class="sxs-lookup"><span data-stu-id="8be5f-205">mklink symlinkname \\\\vdihostserver\\sharefolder\\sftfs.fsd</span></span>**

3.  <span data-ttu-id="8be5f-206">Nell'immagine VDI Master VM aprire una finestra del prompt dei comandi usando l'opzione **Esegui come amministratore** e concedere le autorizzazioni di collegamento remoto in modo che la VM possa accedere al collegamento simbolico nel sistema operativo host VDI.</span><span class="sxs-lookup"><span data-stu-id="8be5f-206">On the VDI Master VM Image, open a Command Prompt window by using the **Run as administrator** option and grant remote link permissions so that the VM can access the symbolic link on the VDI Host operating system.</span></span> <span data-ttu-id="8be5f-207">Per impostazione predefinita, le autorizzazioni di collegamento remoto sono disabilitate.</span><span class="sxs-lookup"><span data-stu-id="8be5f-207">By default, remote link permissions are disabled.</span></span>

    **<span data-ttu-id="8be5f-208">fsutil behavior set SymlinkEvaluation R2R: 1</span><span class="sxs-lookup"><span data-stu-id="8be5f-208">fsutil behavior set SymlinkEvaluation R2R:1</span></span>**

    <span data-ttu-id="8be5f-209">**Nota**  Nel server di archiviazione è necessario abilitare le autorizzazioni appropriate per i collegamenti.</span><span class="sxs-lookup"><span data-stu-id="8be5f-209">**Note** On the storage server, appropriate link permissions must be enabled.</span></span> <span data-ttu-id="8be5f-210">A seconda della posizione del collegamento e del file Sftfs. FSD, le autorizzazioni sono **L2L: 1** o **L2R: 1** o **R2L: 1** o **R2R: 1**.</span><span class="sxs-lookup"><span data-stu-id="8be5f-210">Depending on the location of link and the Sftfs.fsd file, the permissions are **L2L:1** or **L2R:1** or **R2L:1** or **R2R:1**.</span></span>

     

4.  <span data-ttu-id="8be5f-211">Quando configuri il client desktop di App-V nell'immagine VDI Master VM, imposta il valore FILENAME della chiave AppFS uguale al percorso UNC del file FSD che usa il collegamento simbolico. ad esempio, impostarla su \\\\VDIHostserver\\Symlinkname.</span><span class="sxs-lookup"><span data-stu-id="8be5f-211">When you configure the App-V Desktop Client on the VDI Master VM Image, set the AppFS key FILENAME value equal to the UNC path of the FSD file that is using the symbolic link; for example, set it to \\\\VDIHostserver\\Symlinkname.</span></span> <span data-ttu-id="8be5f-212">Quando l'App-V client accede prima alla cache, il collegamento simbolico passa al client un handle per il file della cache.</span><span class="sxs-lookup"><span data-stu-id="8be5f-212">When the App-V client first accesses the cache, the symbolic link passes to the client a handle to the cache file.</span></span> <span data-ttu-id="8be5f-213">Il client continua a usare tale handle purché il client sia in funzione.</span><span class="sxs-lookup"><span data-stu-id="8be5f-213">The client continues to use that handle as long as the client is running.</span></span> <span data-ttu-id="8be5f-214">Il valore del collegamento simbolico può essere aggiornato in modo sicuro anche se i client esistenti hanno aperto la cache condivisa precedente.</span><span class="sxs-lookup"><span data-stu-id="8be5f-214">The value of the symbolic link can safely be updated even if existing clients have the old shared cache open.</span></span>

5.  <span data-ttu-id="8be5f-215">Quando è necessario aggiornare un pacchetto o aggiungere un nuovo pacchetto alla cache, seguire i passaggi da 1 a 5 della procedura di aggiornamento per lo scenario VM statico o in pool.</span><span class="sxs-lookup"><span data-stu-id="8be5f-215">When you must upgrade a package or to add a new package to the cache, follow steps 1 through 5 of the upgrade procedure for either the Static VM or Pooled VM scenario.</span></span> <span data-ttu-id="8be5f-216">Eliminare quindi il collegamento simbolico e ricrearlo in maniera che punti alla nuova versione del file della cache condivisa.</span><span class="sxs-lookup"><span data-stu-id="8be5f-216">Then, delete the symbolic link and re-create it to point to the new version of the shared cache file.</span></span> <span data-ttu-id="8be5f-217">Quando la VM viene riavviata, il client riceve un handle per la copia aggiornata della cache perché la VM usa il percorso che contiene il collegamento simbolico aggiornato.</span><span class="sxs-lookup"><span data-stu-id="8be5f-217">When the VM is restarted, the client receives a handle to the updated copy of the cache because the VM uses the path that contains the updated symbolic link.</span></span> <span data-ttu-id="8be5f-218">Gli utenti hanno quindi accesso alle applicazioni nuove e aggiornate.</span><span class="sxs-lookup"><span data-stu-id="8be5f-218">Then, the users have access to the new and updated applications.</span></span>

## <span data-ttu-id="8be5f-219">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="8be5f-219">Related topics</span></span>


[<span data-ttu-id="8be5f-220">Come installare il server di gestione di Application Virtualization</span><span class="sxs-lookup"><span data-stu-id="8be5f-220">How to Install Application Virtualization Management Server</span></span>](how-to-install-application-virtualization-management-server.md)

[<span data-ttu-id="8be5f-221">Come installare manualmente Application Virtualization Client</span><span class="sxs-lookup"><span data-stu-id="8be5f-221">How to Manually Install the Application Virtualization Client</span></span>](how-to-manually-install-the-application-virtualization-client.md)

[<span data-ttu-id="8be5f-222">Come installare il client usando la riga di comando</span><span class="sxs-lookup"><span data-stu-id="8be5f-222">How to Install the Client by Using the Command Line</span></span>](how-to-install-the-client-by-using-the-command-line-new.md)

 

 





